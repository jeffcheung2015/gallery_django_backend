(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{516:function(e,a,t){e.exports=t(949)},521:function(e,a,t){},568:function(e,a,t){},570:function(e,a,t){},590:function(e,a){},592:function(e,a){},629:function(e,a){},630:function(e,a){},690:function(e,a,t){},691:function(e,a,t){},692:function(e,a,t){},713:function(e,a,t){},714:function(e,a,t){},944:function(e,a,t){},946:function(e,a,t){},948:function(e,a,t){},949:function(e,a,t){"use strict";t.r(a);var n,r=t(0),s=t.n(r),o=t(21),c=t.n(o),i=(t(521),t(41)),l=t(42),u=t(44),p=t(43),m=t(45),d=t(40),g=t(165),h=t(136),f=t(33),v=t(455),b=t(35),E=t.n(b),C="UI_START_LOADING",k="UI_STOP_LOADING",I={isLogin:!1,userDtlFetched:!1,lastRespMsg:"",access:"",refresh:"",userId:-1,userDetail:{username:"",email:"",createdAt:"",lastLoginAt:""},userProfile:{avatar:"",lastProfileEdit:"",noOfImgs:0,activity:[]}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"USER_LOGIN_SUCCESS":return E()({},e,{lastRespMsg:a.lastRespMsg,isLogin:!0,access:a.access,refresh:a.refresh,userId:a.userId,userDetail:a.userDetail,userDtlFetched:!0,userProfile:a.userProfile});case"USER_LOGIN_FAIL":return E()({},e,{lastRespMsg:a.lastRespMsg,isLogin:!1,access:"",refresh:"",userId:-1,userDetail:{},userDtlFetched:!1,userProfile:{}});case"USER_VERIFY_TOKEN_SUCCESS":return E()({},e,{lastRespMsg:a.lastRespMsg,userId:a.userId,isLogin:!0,access:a.access,refresh:a.refresh});case"USER_VERIFY_TOKEN_FAIL":return E()({},e,{lastRespMsg:a.lastRespMsg,isLogin:!1,userId:-1,access:"",refresh:"",userDetail:{},userDtlFetched:!1,userProfile:{}});case"USER_SIGNUP_SUCCESS":case"USER_SIGNUP_FAIL":return E()({},e,{lastRespMsg:a.lastRespMsg});case"GET_USER_SUCCESS":return E()({},e,{lastRespMsg:a.lastRespMsg,userDetail:a.userDetail,userDtlFetched:!0,userProfile:a.profile});case"GET_USER_FAIL":return E()({},e,{lastRespMsg:a.lastRespMsg,userDetail:{},userId:-1,userDtlFetched:!1,userProfile:{}});case"UPDATE_AVATAR_SUCCESS":case"UPDATE_AVATAR_FAIL":case"UPDATE_USER_SUCCESS":case"UPDATE_USER_FAIL":return E()({},e,{lastRespMsg:a.lastRespMsg});case"USER_LOGOUT":return E()({},e,{lastRespMsg:a.lastRespMsg,isLogin:!1,access:"",refresh:"",userId:-1,userDetail:{},userDtlFetched:!1,userProfile:{}});default:return e}},O={isLoading:!0,isReadyRedirect:!1},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;switch((arguments.length>1?arguments[1]:void 0).type){case C:return E()({},e,{isLoading:!0});case k:return E()({},e,{isLoading:!1});default:return e}},S={lastRespMsg:"00000",data:null,imgCount:-1,numPages:-1,currPage:-1,tags:[]},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"API_UPLOAD_SUCCESS":case"API_UPLOAD_FAIL":return E()({},e,{lastRespMsg:a.lastRespMsg});case"API_GET_IMAGE_SUCCESS":return E()({},e,{lastRespMsg:a.lastRespMsg,data:a.data,imgCount:a.imgCount,numPages:a.numPages,currPage:a.currPage});case"API_GET_IMAGE_FAIL":return E()({},e,{lastRespMsg:a.lastRespMsg});case"API_GET_TAGS_SUCCESS":return E()({},e,{lastRespMsg:a.lastRespMsg,tags:a.tags});case"API_GET_TAGS_FAIL":return E()({},e,{lastRespMsg:a.lastRespMsg,tags:[]});default:return e}},L=t(457),R=t(88),N=t(331),A=Object(v.createLogger)({}),x=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||f.d,D=Object(R.a)(),j=Object(f.e)((n=D,Object(f.c)({router:Object(g.b)(n),userReducer:w,uiReducer:y,apiReducer:P})),x(Object(f.a)(Object(N.a)(D)),Object(f.a)(L.a),Object(f.a)(A))),T=t(12),U=t.n(T),_=t(24),M=t(19),F=(t(568),t(569),t(570),t(1009)),B=t(1010),G=t(1011),V=t(491),z=t(458),W=t.n(z),q=t(117),H=t.n(q),Y=t(1034),J=t(461),K=t.n(J),Q=t(223),X=t.n(Q),Z=t(138),$=t.n(Z),ee=t(460),ae=t.n(ee),te=t(462),ne=t.n(te),re=t(289),se=t.n(re).a.create({baseURL:"http://django-dev.ap-southeast-1.elasticbeanstalk.com/",timeout:3e4});se.interceptors.request.use(function(e){return console.log(">>> Interceptor.req :",e),e}),se.interceptors.response.use(function(e){return console.log(">>> Interceptor.resp: ",e),e});var oe=se;function ce(e){return oe({url:"/api/token/verify/",method:"POST",data:{token:e}})}function ie(e){return oe({url:"/api/getuser",method:"POST",headers:{Authorization:"Bearer "+e}})}function le(e,a){return oe({url:"/api/updateuser",method:"POST",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+a},data:e})}function ue(e,a){return oe({url:"/api/updateavatar",method:"POST",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+a},data:e})}var pe=t(297),me=t.n(pe),de="/",ge="/login",he="/signup",fe="/profile",ve="/upload",be="00000",Ee={"00000":"Successful Request",99999:"Unexpected server error occurs",99998:"Google recaptcha verification failed","00001":"Some user input fields are invalid","00002":"Username or email are duplicated","00003":"User doesn't exist","00004":"User password is incorrect","00005":"User Id not found","00006":"User password must be greater than 8","00007":"Invalid email address","00011":"Image name or image descriptions are empty or unexpected upload error.","00012":"No images owned by that user.","00013":"Delete image fail unexpectedly."},Ce=function(e,a,t,n,r){return function(){var s=Object(_.a)(U.a.mark(function s(o){var c,i,l;return U.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return c=!1,i="99999",s.prev=2,s.next=5,oe({url:"/api/signup",method:"POST",data:{username:e,password:a,email:t,recaptchaToken:n}});case 5:l=s.sent,console.log(">>> userSignup resp:",l),i=l.data.resp_code,c=i===be,s.next=14;break;case 11:s.prev=11,s.t0=s.catch(2),console.error(">>> userSignup, error:",s.t0);case 14:c?(r.onSuccess(),o({lastRespMsg:i,type:"USER_SIGNUP_SUCCESS"})):(r.onFail(i),o({lastRespMsg:i,type:"USER_SIGNUP_FAIL"}));case 15:case"end":return s.stop()}},s,null,[[2,11]])}));return function(e){return s.apply(this,arguments)}}()},ke=function(e,a,t,n){return function(){var r=Object(_.a)(U.a.mark(function r(s){var o,c,i,l,u,p,m,d;return U.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=!1,c="99999",i={},l={},r.prev=4,r.next=7,oe({url:"/api/login",method:"POST",data:{username:e,password:a,recaptchaToken:t}});case 7:u=r.sent,console.log(">>> userLogin resp:",u),p=u.data,m=p.access,d=p.refresh,i=u.data,c=u.data.resp_code,localStorage.setItem("access",m),localStorage.setItem("refresh",d),l=me.a.decode(m),console.log(">>> userLogin decoded:",l),o=c===be,r.next=22;break;case 19:r.prev=19,r.t0=r.catch(4),console.log(">>> userLogin, error:",r.t0);case 22:o?(n.onSuccess(),s({lastRespMsg:c,type:"USER_LOGIN_SUCCESS",userId:l.user_id,access:i.access,refresh:i.refresh,userDetail:{username:i.username,email:i.email,createdAt:i.date_joined,lastLoginAt:i.last_login},userProfile:{avatar:i.avatar,lastProfileEdit:i.last_edit,noOfPosts:i.no_of_posts,noOfImgs:i.no_of_imgs}})):(n.onFail(c),s({lastRespMsg:c,type:"USER_LOGIN_FAIL"}));case 23:case"end":return r.stop()}},r,null,[[4,19]])}));return function(e){return r.apply(this,arguments)}}()},Ie=function(e,a){return function(){var t=Object(_.a)(U.a.mark(function t(n){var r,s,o,c,i,l,u;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=!1,s="",!e||!a){t.next=31;break}return t.prev=3,t.next=6,ce(e);case 6:o=t.sent,console.log(">>> verifyJWTToken accessResp:",o),r=!0,t.next=31;break;case 11:return t.prev=11,t.t0=t.catch(3),console.error(">>> verifyJWTToken access token invalid:",t.t0),t.prev=14,t.next=17,ce(a);case 17:return c=t.sent,console.log(">>> verifyJWTToken refreshResp: ",c),t.next=21,oe({url:"/api/token/refresh/",method:"POST",data:{refresh:a}});case 21:i=t.sent,console.log(">>> refreshToken resp: ",i),s=i.data.access,localStorage.setItem("access",s),r=!0,t.next=31;break;case 28:t.prev=28,t.t1=t.catch(14),console.error(">>> verifyJWTToken refresh token invalid:",t.t1);case 31:r?(l=s||e,u=me.a.decode(l),console.log(">>> verifyJWTToken decode jwt:",u),n({lastRespMsg:"00000",type:"USER_VERIFY_TOKEN_SUCCESS",userId:u.user_id,access:l})):n({lastRespMsg:"99999",type:"USER_VERIFY_TOKEN_FAIL"});case 32:case"end":return t.stop()}},t,null,[[3,11],[14,28]])}));return function(e){return t.apply(this,arguments)}}()},we=function(e){return function(){var a=Object(_.a)(U.a.mark(function a(t){var n,r,s,o;return U.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=!1,r="99999",s={},a.prev=3,a.next=6,ie(e);case 6:o=a.sent,s=o.data,r=o.data.resp_code,console.log(">>> getAuthUser: ",o.data),n=r===be,a.next=16;break;case 13:a.prev=13,a.t0=a.catch(3),console.error(">>> getAuthUser, error:",a.t0);case 16:t(n?{lastRespMsg:r,type:"GET_USER_SUCCESS",userDetail:{username:s.username,email:s.email,createdAt:s.date_joined,lastLoginAt:s.last_login},profile:{avatar:s.avatar,lastProfileEdit:s.last_edit,noOfImgs:s.no_of_imgs,activity:s.activity}}:{lastRespMsg:r,type:"GET_USER_FAIL"});case 17:case"end":return a.stop()}},a,null,[[3,13]])}));return function(e){return a.apply(this,arguments)}}()},Oe=function(e,a,t){return function(){var n=Object(_.a)(U.a.mark(function n(r){var s,o,c;return U.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=!1,o="99999",{},n.prev=3,n.next=6,ue(e,a);case 6:c=n.sent,o=c.data.resp_code,s=c.data.resp_code===be,n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),console.log(">>> APIActions.updateAvatar.error:",n.t0);case 14:s?(t.onSuccess(),r({lastRespMsg:o,type:"UPDATE_AVATAR_SUCCESS"})):(t.onFail(o),r({lastRespMsg:o,type:"UPDATE_AVATAR_FAIL"}));case 15:case"end":return n.stop()}},n,null,[[3,11]])}));return function(e){return n.apply(this,arguments)}}()},ye=function(e,a,t){return function(){var n=Object(_.a)(U.a.mark(function n(r){var s,o,c;return U.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=!1,o="99999",{},n.prev=3,n.next=6,le(e,a);case 6:c=n.sent,o=c.data.resp_code,s=o===be,n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),console.log(">>> APIActions.updateUser.error:",n.t0);case 14:s?(t.onSuccess(),r({lastRespMsg:o,type:"UPDATE_USER_SUCCESS"})):(t.onFail(o),r({lastRespMsg:o,type:"UPDATE_USER_FAIL"}));case 15:case"end":return n.stop()}},n,null,[[3,11]])}));return function(e){return n.apply(this,arguments)}}()},Se=function(){return function(){var e=Object(_.a)(U.a.mark(function e(a){var t;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe({url:"/api/logout",method:"GET"});case 2:t=e.sent,localStorage.clear(),a({lastRespMsg:t.data.resp_code,type:"USER_LOGOUT"});case 5:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}()},Pe=t(214),Le=t(453),Re=t(954),Ne=t(233),Ae=t(1031),xe=t(1008),De=t(1035),je=t(1007),Te=(t(690),function(e){function a(){return Object(i.a)(this,a),Object(u.a)(this,Object(p.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props,a=e.classes,t=e.isDrawerOpen,n=e.handleDrawerAction,r=e.isLogin,o=e.isLoading,c=e.userDetail,i=e.userDtlFetched;return r&&!o&&i?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"div-drawerCover "+(t?"":"div-hidden"),onClick:n}),s.a.createElement("div",{className:"div-sideDrawer-wrapper"},s.a.createElement(Ae.a,{className:a.drawer,variant:"persistent",anchor:"left",open:t,classes:{paper:a.drawerPaper}},s.a.createElement("div",{className:a.drawerHeader},s.a.createElement(je.a,{className:a.avatar},c.username[0]),s.a.createElement("span",{className:"span-username"},c.username)),s.a.createElement(xe.a,null),s.a.createElement(De.a,null)))):null}}]),a}(s.a.Component)),Ue=Object(d.c)(function(e){return{userDtlFetched:e.userReducer.userDtlFetched,isLoading:e.uiReducer.isLoading,isLogin:e.userReducer.isLogin,userDetail:e.userReducer.userDetail}},function(e){return{}})(Object(Re.a)(function(e){return{avatar:{},drawer:{width:240,flexShrink:0},drawerPaper:{width:240,zIndex:10011},drawerHeader:{display:"inline-flex",alignItems:"center",padding:"0 16px",minHeight:"64px",justifyContent:"flex-start",background:"#FFFFFF"}}})(Te)),_e=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(u.a)(this,Object(p.a)(a).call(this,e))).state={isMenuOpen:!1},t.handleMenuClose=t.handleMenuClose.bind(Object(M.a)(t)),t.redirect=t.redirect.bind(Object(M.a)(t)),t.logout=t.logout.bind(Object(M.a)(t)),t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"handleMenuClose",value:function(){this.setState({isMenuOpen:!this.state.isMenuOpen})}},{key:"redirect",value:function(e){this.props.history.push(e)}},{key:"logout",value:function(){var e=Object(_.a)(U.a.mark(function e(){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.userLogout();case 2:this.redirect("");case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.props,t=a.classes,n=a.isDrawerOpen,r=a.handleDrawerAction,o=a.isLogin,c=(this.state.isMenuOpen,this.props.history.location.pathname,Object(Pe.a)({overrides:{MuiTooltip:{popper:{zIndex:"10002"},tooltip:{color:"#FFFFFF",background:"#0A0A0A"}}}}));return s.a.createElement("div",{className:"div-globalHeader-wrapper"},o&&s.a.createElement(Ue,{isDrawerOpen:n,handleDrawerAction:r}),s.a.createElement(Le.a,{theme:c},s.a.createElement(F.a,{className:n?t.appBarShift:t.appBar},s.a.createElement(B.a,{className:t.toolbar},o&&!n&&s.a.createElement(G.a,{onClick:r,edge:"start",className:t.iconButtonMenu},s.a.createElement(W.a,null)),s.a.createElement("div",{className:"div-leftPartIcons"},s.a.createElement(G.a,{className:t.iconButton,onClick:function(){return e.redirect("")}},s.a.createElement(Y.a,{title:"Home",classes:t.tooltip},s.a.createElement(ae.a,null)))),s.a.createElement(V.a,{className:"Typography-gallery "+t.globalHeaderTitle,variant:"h6",noWrap:!0},"Gallery"),s.a.createElement("div",{className:t.grow}),s.a.createElement("div",{className:"div-headerIcons"},s.a.createElement("div",{className:(o?"div-hidden ":"div-visitor ")+t.headerIcons},s.a.createElement(G.a,{className:t.iconButton,onClick:function(){return e.redirect("login")}},s.a.createElement(Y.a,{title:"Login",classes:t.tooltip},s.a.createElement(K.a,null))),s.a.createElement(G.a,{className:t.iconButton,onClick:function(){return e.redirect("signup")}},s.a.createElement(Y.a,{title:"Sign up",classes:t.tooltip},s.a.createElement(X.a,null)))),s.a.createElement("div",{className:(o?"div-member ":"div-hidden ")+t.headerIcons},s.a.createElement(G.a,{className:t.iconButton,onClick:function(){return e.redirect("upload")}},s.a.createElement(Y.a,{title:"Upload",classes:t.tooltip},s.a.createElement($.a,null))),s.a.createElement(G.a,{className:t.iconButton,onClick:function(){return e.redirect("profile")}},s.a.createElement(Y.a,{title:"Profile",classes:t.tooltip},s.a.createElement(H.a,null))),s.a.createElement(G.a,{edge:"end",className:t.iconButton,onClick:this.logout},s.a.createElement(Y.a,{title:"Logout",classes:t.tooltip},s.a.createElement(ne.a,null)))))))))}}]),a}(s.a.Component),Me=Object(Ne.e)(Object(d.c)(function(e){return{isLogin:e.userReducer.isLogin}},function(e){return Object(f.b)({userLogout:Se},e)})(Object(Re.a)(function(e){return{appBar:{zIndex:"9999",transition:"margin 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms,width 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms"},appBarShift:{zIndex:"9999",width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:"margin 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms,width 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms"},toolbar:{minHeight:"40px !important",background:"linear-gradient(to right, #DFDFDF, #EFEFEF)"},iconButtonMenu:{color:"#000000",marginRight:"20px"},globalHeaderTitle:{color:"#000000",marginRight:"20px"},inputInput:{width:"100%",margin:"1px 1px 1px 40px",color:"#000000"},grow:{flexGrow:1},iconButton:{color:"#000000"}}})(_e))),Fe=(t(691),function(e){function a(){return Object(i.a)(this,a),Object(u.a)(this,Object(p.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"div-globalFooter-wrapper"})}}]),a}(s.a.Component)),Be=t(301);function Ge(){return{type:C}}function Ve(){return{type:k}}t(692);var ze=t(302),We=t(1022),qe=t(1015),He=t(463),Ye=t.n(He),Je=t(1014),Ke=t(105),Qe=t.n(Ke),Xe=t(1013),Ze=t(49),$e=t(60),ea=t.n($e),aa=t(139),ta=t.n(aa),na=t(83),ra=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(u.a)(this,Object(p.a)(a).call(this,e))).state={},t.capchaRef=null,t.onLoadRecaptcha=t.onLoadRecaptcha.bind(Object(M.a)(t)),t.verifyCallback=t.verifyCallback.bind(Object(M.a)(t)),t.onFormSubmit=t.onFormSubmit.bind(Object(M.a)(t)),t.onFormValidate=t.onFormValidate.bind(Object(M.a)(t)),t.redirect=t.redirect.bind(Object(M.a)(t)),t.handleSnackBar=t.handleSnackBar.bind(Object(M.a)(t)),t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"redirect",value:function(e){this.props.history.push(e)}},{key:"handleSnackBar",value:function(e,a){this.props.enqueueSnackbar(e,{variant:a})}},{key:"componentDidMount",value:function(){this.capchaRef&&this.capchaRef.reset()}},{key:"onLoadRecaptcha",value:function(){this.capchaRef&&this.capchaRef.reset()}},{key:"verifyCallback",value:function(e){console.log(e,"<= your recaptcha token"),this.state.recaptchaToken=e}},{key:"onFormSubmit",value:function(){var e=Object(_.a)(U.a.mark(function e(a){var t,n,r,s=this;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(">>> onFormSubmit, formVals: ",a),t={},n=a.username,r=a.password,this.state.recaptchaToken||(t.recaptchaToken="Recaptcha verification needs to be done.",this.handleSnackBar("Recaptcha verification needs to be done.","warning")),r.length<8&&(t.password="Password length must be greater than 8."),ta()(t)){e.next=7;break}return e.abrupt("return",t);case 7:return console.log(Ee[this.props.lastRespMsg]),this.props.startLoading(),e.next=11,this.props.userLogin(n,r,this.state.recaptchaToken,{onSuccess:function(){return s.handleSnackBar("Login successfully.","success")},onFail:function(e){s.handleSnackBar(Ee[e],"error"),s.capchaRef.reset()}});case 11:this.props.stopLoading();case 12:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.props.isLogin&&this.props.userDtlFetched&&(console.log("Login page component componentDidUpdate redirect to home page"),this.redirect(""))}},{key:"onFormValidate",value:function(e){console.log("onFormValidate: ",e);var a={};return ea()(["username","password"],function(t){e[t]||(a[t]="Required field")}),a}},{key:"render",value:function(){var e=this,a=this.props.classes;return s.a.createElement("div",{className:"div-loginPage-wrapper"},s.a.createElement(Ze.b,{onSubmit:this.onFormSubmit,validate:this.onFormValidate,render:function(t){var n=t.handleSubmit,r=t.submitting;return s.a.createElement("form",{className:"form-loginPage",onSubmit:n},s.a.createElement(ze.a,{className:a.loginPaper},s.a.createElement(Xe.a,{container:!0},s.a.createElement(Xe.a,{item:!0,xs:12,className:a.loginLabel},s.a.createElement(Ye.a,{className:a.loginLabelIcon})),s.a.createElement(Xe.a,{item:!0,xs:12},s.a.createElement(Ze.a,{fullWidth:!0,required:!0,name:"username",type:"text",render:function(e){var t=e.input,n=e.meta;return s.a.createElement("div",null,s.a.createElement(We.a,{label:"Username",onChange:t.onChange,className:a.textField,margin:"normal",error:n.submitFailed&&!!n.error,variant:"outlined",InputProps:{startAdornment:s.a.createElement(Je.a,{position:"start"},s.a.createElement(H.a,null))}}),s.a.createElement("span",{className:"span-metaError"},n.dirty?n.submitError:n.modified?n.error:""))}})),s.a.createElement(Xe.a,{item:!0,xs:12},s.a.createElement(Ze.a,{fullWidth:!0,required:!0,name:"password",render:function(e){var t=e.input,n=e.meta;return s.a.createElement("div",null,s.a.createElement(We.a,{label:"Password",type:"password",onChange:t.onChange,className:a.textField,margin:"normal",error:n.submitFailed&&!!n.error,variant:"outlined",InputProps:{startAdornment:s.a.createElement(Je.a,{position:"start"},s.a.createElement(Qe.a,null))}}),s.a.createElement("span",{className:"span-metaError"},n.dirty?n.submitError:n.modified?n.error:""))}})),s.a.createElement(Xe.a,{item:!0,xs:12,className:"div-recaptcha-container"},s.a.createElement("div",{className:"div-reCaptcha-innerContainer"},s.a.createElement(h.ReCaptcha,{ref:function(a){e.capchaRef=a},size:"normal","data-theme":"dark",render:"explicit",sitekey:"http://django-dev.ap-southeast-1.elasticbeanstalk.com"==window.origin?"6LddeLgUAAAAAOR5taorQHIse2nUuP_nVf0D3CfE":"6LcpqLUUAAAAAO9A0zXVAModmR0QqaUEw2NGEzsI",onloadCallback:e.onLoadRecaptcha,verifyCallback:e.verifyCallback}))),s.a.createElement(Xe.a,{item:!0,xs:12},s.a.createElement(qe.a,{className:a.loginButton,variant:"contained",color:"primary",type:"submit",disabled:r},"Login")))))}}))}}]),a}(s.a.Component),sa=Object(Ne.e)(Object(d.c)(function(e){return{userDtlFetched:e.userReducer.userDtlFetched,access:e.userReducer.access,lastRespMsg:e.userReducer.lastRespMsg,isLogin:e.userReducer.isLogin}},function(e){return Object(f.b)({userLogin:ke,startLoading:Ge,stopLoading:Ve},e)})(Object(Re.a)(function(){return{loginPaper:{padding:"30px",marginBottom:"30px"},loginLabel:{fontSize:"26px",fontWeight:"600",textAlign:"center",padding:"30px",background:"#a9a9a9"},loginLabelIcon:{width:"80px",height:"80px"},textField:{width:"100%",margin:"15px auto"},loginButton:{width:"100%",margin:"15px auto",padding:"10px",fontSize:"16px"}}})(Object(na.withSnackbar)(ra)))),oa=(t(713),t(224)),ca=t.n(oa);function ia(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}var la=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(u.a)(this,Object(p.a)(a).call(this,e))).state={},t.capchaRef=null,t.onLoadRecaptcha=t.onLoadRecaptcha.bind(Object(M.a)(t)),t.verifyCallback=t.verifyCallback.bind(Object(M.a)(t)),t.onFormSubmit=t.onFormSubmit.bind(Object(M.a)(t)),t.onFormValidate=t.onFormValidate.bind(Object(M.a)(t)),t.redirect=t.redirect.bind(Object(M.a)(t)),t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"redirect",value:function(e){this.props.history.push(e)}},{key:"handleSnackBar",value:function(e,a){this.props.enqueueSnackbar(e,{variant:a})}},{key:"componentDidMount",value:function(){this.capchaRef&&this.capchaRef.reset()}},{key:"onLoadRecaptcha",value:function(){this.capchaRef&&this.capchaRef.reset()}},{key:"verifyCallback",value:function(e){console.log(e,"<= your recaptcha token"),this.state.recaptchaToken=e}},{key:"onFormSubmit",value:function(){var e=Object(_.a)(U.a.mark(function e(a){var t,n,r,s,o,c=this;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(">>> onFormSubmit: ",a),t={},n=a.password,r=a.confirmPassword,s=a.email,o=a.username,this.state.recaptchaToken||(t.recaptchaToken="Recaptcha verification needs to be done.",this.handleSnackBar("Recaptcha verification needs to be done.","warning")),n!=r&&(t.password="Password and Confirm Password field don't match."),n.length<8&&(t.password="Password length must be greater than 8."),ia(s)||(t.email="Not a valid email."),ta()(t)){e.next=9;break}return e.abrupt("return",t);case 9:return this.props.startLoading(),e.next=12,this.props.userSignup(o,n,s,this.state.recaptchaToken,{onSuccess:function(){return c.handleSnackBar("Sign up successfully.","success")},onFail:function(e){c.handleSnackBar(Ee[e],"error"),c.capchaRef.reset()}});case 12:this.props.stopLoading(),this.props.lastRespMsg===be&&this.redirect("");case 14:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}()},{key:"onFormValidate",value:function(e){console.log("onFormValidate: ",e);var a={};return ea()(["username","email","password","confirmPassword"],function(t){e[t]||(a[t]="Required field")}),a}},{key:"componentDidUpdate",value:function(){this.props.isLogin&&this.redirect("")}},{key:"render",value:function(){var e=this,a=this.props,t=a.classes;a.lastRespMsg;return s.a.createElement("div",{className:"div-signupPage-wrapper"},s.a.createElement(Ze.b,{onSubmit:this.onFormSubmit,validate:this.onFormValidate,render:function(a){var n=a.handleSubmit;a.submitting,a.pristine;return s.a.createElement("form",{className:"form-signupPage",onSubmit:n},s.a.createElement(ze.a,{className:t.signupPaper},s.a.createElement(Xe.a,{container:!0},s.a.createElement(Xe.a,{item:!0,xs:12,className:t.signupLabel},s.a.createElement(X.a,{className:t.signupLabelIcon})),s.a.createElement(Xe.a,{item:!0,xs:12},s.a.createElement(Ze.a,{fullWidth:!0,required:!0,name:"username",type:"text",render:function(e){var a=e.input,n=e.meta;return s.a.createElement("div",null,s.a.createElement(We.a,{label:"Username",onChange:a.onChange,className:t.textField,margin:"normal",error:n.submitFailed&&!!n.error,variant:"outlined",InputProps:{startAdornment:s.a.createElement(Je.a,{position:"start"},s.a.createElement(H.a,null))}}),s.a.createElement("span",{className:"span-metaError"},n.dirty?n.submitError:n.modified?n.error:""))}})),s.a.createElement(Xe.a,{item:!0,xs:12},s.a.createElement(Ze.a,{fullWidth:!0,required:!0,name:"email",type:"email",render:function(e){var a=e.input,n=e.meta;return s.a.createElement("div",null,s.a.createElement(We.a,{label:"Email",onChange:a.onChange,className:t.textField,margin:"normal",error:n.submitFailed&&!!n.error,variant:"outlined",InputProps:{startAdornment:s.a.createElement(Je.a,{position:"start"},s.a.createElement(ca.a,null))}}),s.a.createElement("span",{className:"span-metaError"},n.dirty?n.submitError:n.modified?n.error:""))}})),s.a.createElement(Xe.a,{item:!0,xs:5},s.a.createElement(Ze.a,{fullWidth:!0,required:!0,name:"password",render:function(e){var a=e.input,n=e.meta;return s.a.createElement("div",null,s.a.createElement(We.a,{label:"Password",type:"password",onChange:a.onChange,variant:"outlined",className:t.textField,margin:"normal",error:n.submitFailed&&!!n.error,InputProps:{startAdornment:s.a.createElement(Je.a,{position:"start"},s.a.createElement(Qe.a,null))}}),s.a.createElement("span",{className:"span-metaError"},n.dirty?n.submitError:n.modified?n.error:""))}})),s.a.createElement(Xe.a,{item:!0,xs:2}),s.a.createElement(Xe.a,{item:!0,xs:5},s.a.createElement(Ze.a,{fullWidth:!0,required:!0,name:"confirmPassword",render:function(e){var a=e.input,n=e.meta;return s.a.createElement("div",null,s.a.createElement(We.a,{label:"Confirm Password",type:"password",onChange:a.onChange,variant:"outlined",className:t.textField,margin:"normal",error:n.submitFailed&&!!n.error,InputProps:{startAdornment:s.a.createElement(Je.a,{position:"start"},s.a.createElement(Qe.a,null))}}),s.a.createElement("span",{className:"span-metaError"},n.dirty?n.submitError:n.modified?n.error:""))}})),s.a.createElement(Xe.a,{item:!0,xs:8},s.a.createElement("div",{className:"div-reCaptcha-container"},s.a.createElement(h.ReCaptcha,{ref:function(a){e.capchaRef=a},size:"normal","data-theme":"dark",render:"explicit",sitekey:"http://django-dev.ap-southeast-1.elasticbeanstalk.com"==window.origin?"6LddeLgUAAAAAOR5taorQHIse2nUuP_nVf0D3CfE":"6LcpqLUUAAAAAO9A0zXVAModmR0QqaUEw2NGEzsI",onloadCallback:e.onLoadRecaptcha,verifyCallback:e.verifyCallback}))),s.a.createElement(Xe.a,{item:!0,xs:4},s.a.createElement(qe.a,{className:t.signupButton,variant:"contained",color:"primary",type:"submit"},"Sign up")))))}}))}}]),a}(s.a.Component),ua=Object(Ne.e)(Object(d.c)(function(e){return{isLogin:e.userReducer.isLogin,lastRespMsg:e.userReducer.lastRespMsg}},function(e){return Object(f.b)({userSignup:Ce,startLoading:Ge,stopLoading:Ve},e)})(Object(Re.a)(function(){return{signupPaper:{padding:"30px",marginBottom:"30px"},signupLabel:{fontSize:"26px",fontWeight:"600",textAlign:"center",padding:"30px",background:"#a9a9a9"},signupLabelIcon:{width:"80px",height:"80px"},textField:{width:"100%",margin:"15px auto"},signupButton:{width:"100%",margin:"15px auto",padding:"10px",fontSize:"16px"}}})(Object(na.withSnackbar)(la)))),pa=(t(714),t(1016)),ma=t(1018),da=t(140),ga=t.n(da),ha=t(1017),fa=t(144),va=t.n(fa),ba=t(1024),Ea=t(490),Ca=t(953),ka=t(168),Ia=t(121),wa=t(1032),Oa=t(1019),ya=t(1030),Sa=t(1025),Pa=t(1020),La=t(169),Ra=t(232);function Na(e,a){return oe({url:"/api/upsert",method:"POST",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+a},data:e})}function Aa(e,a,t,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=r?"/api/searchimage/?":"/api/getimage/?",o="";if(e&&(s+=o+"userId=".concat(e),o="&"),a&&(s+=o+"page=".concat(a),o="&"),t&&(s+=o+"imgPerPage=".concat(t),o="&"),r&&(s+=o+"searchTxt=".concat(r),o="&"),n){var c="";ea()(n,function(e,a){c+=o+"tags=".concat(e)}),s+=c}return oe({url:s,method:"GET"})}var xa=function(e,a){return function(){var t=Object(_.a)(U.a.mark(function t(n){var r,s,o;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r="99999",s=!1,t.prev=2,t.next=5,Na(e,a);case 5:o=t.sent,r=o.data.resp_code,s=r===be,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(">>> APIActions.upsertImage.error:",t.t0);case 13:n(s?{lastRespMsg:r,type:"API_UPLOAD_SUCCESS"}:{lastRespMsg:r,type:"API_UPLOAD_FAIL"});case 14:case"end":return t.stop()}},t,null,[[2,10]])}));return function(e){return t.apply(this,arguments)}}()},Da=function(e,a,t,n,r){return function(){var s=Object(_.a)(U.a.mark(function s(o){var c,i,l,u;return U.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return c="99999",i=!1,l={},s.prev=3,console.log(">>> APIActions.getImages: userId:".concat(e,", currPage:").concat(a,", queryStr:").concat(r)),s.next=7,Aa(e,a,t,n,r);case 7:u=s.sent,c=u.data.resp_code,l=u.data,i=c===be,s.next=16;break;case 13:s.prev=13,s.t0=s.catch(3),console.log(">>> APIActions.getImages.error:",s.t0);case 16:o(i?{lastRespMsg:c,type:"API_GET_IMAGE_SUCCESS",data:l.data,imgCount:l.img_count,numPages:l.num_pages,currPage:l.curr_page}:{lastRespMsg:c,type:"API_GET_IMAGE_FAIL"});case 17:case"end":return s.stop()}},s,null,[[3,13]])}));return function(e){return s.apply(this,arguments)}}()},ja=function(){return function(){var e=Object(_.a)(U.a.mark(function e(a){var t,n,r,s;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="99999",n=!1,r={},e.prev=3,console.log(">>> APIActions.getTags"),e.next=7,oe({url:"/api/gettags",method:"GET"});case 7:s=e.sent,t=s.data.resp_code,r=s.data,n=t===be,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(">>> APIActions.getTags.error:",e.t0);case 16:a(n?{lastRespMsg:t,type:"API_GET_TAGS_SUCCESS",tags:r.tags}:{lastRespMsg:t,type:"API_GET_TAGS_FAIL"});case 17:case"end":return e.stop()}},e,null,[[3,13]])}));return function(a){return e.apply(this,arguments)}}()},Ta=t(77),Ua=t.n(Ta),_a=t(290),Ma=t.n(_a),Fa=t(465),Ba=t.n(Fa),Ga=t(466),Va=t.n(Ga),za=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(u.a)(this,Object(p.a)(a).call(this,e))).state={currPage:1,imgPerPage:"6",rightCardTab:"userActivity",avatarFile:null,updatedAvatar:null,profileUpdateOpen:!1,avatarUpdateOpen:!1,imgUpdateOpen:!1,currImgId:-1,currImgSrc:"",currImgName:"",currImgDesc:"",currImgCreatedAt:"",currTags:[]},t.onDrop=t.onDrop.bind(Object(M.a)(t)),t.redirect=t.redirect.bind(Object(M.a)(t)),t.onUpdateProfile=t.onUpdateProfile.bind(Object(M.a)(t)),t.onUpdateAvatar=t.onUpdateAvatar.bind(Object(M.a)(t)),t.onFormValidate=t.onFormValidate.bind(Object(M.a)(t)),t.handleModalClose=t.handleModalClose.bind(Object(M.a)(t)),t.handleModalOpen=t.handleModalOpen.bind(Object(M.a)(t)),t.onPageChange=t.onPageChange.bind(Object(M.a)(t)),t.onInputChange=t.onInputChange.bind(Object(M.a)(t)),t.onDropdownChange=t.onDropdownChange.bind(Object(M.a)(t)),t.onClickUpdateImage=t.onClickUpdateImage.bind(Object(M.a)(t)),t.changeRightTabContent=t.changeRightTabContent.bind(Object(M.a)(t)),t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"redirect",value:function(e){this.props.history.push(e)}},{key:"componentDidMount",value:function(){var e=Object(_.a)(U.a.mark(function e(){var a,t,n,r,s,o;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.startLoading(),a=localStorage.getItem("access"),t=localStorage.getItem("refresh"),e.next=5,this.props.verifyJWTToken(a,t);case 5:if(n=!0,this.props.lastRespMsg!==be){e.next=15;break}return e.next=9,this.props.getAuthUser(a);case 9:if(this.props.lastRespMsg!==be){e.next=15;break}return r=this.state,s=r.currPage,o=r.imgPerPage,n=!1,e.next=14,this.props.getImages(this.props.userId,s,o);case 14:this.props.stopLoading();case 15:if(!n){e.next=19;break}return e.next=18,this.props.userLogout();case 18:this.props.stopLoading();case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onClickUpdateImage",value:function(){var e=Object(_.a)(U.a.mark(function e(a){var t,n,r,s,o,c,i,l,u;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new FormData,n=this.state,r=n.currImgId,s=n.currTags,o=n.currImgName,c=n.currImgDesc,i=n.currImgCreatedAt,l=n.currPage,u=n.imgPerPage,this.props.tags){e.next=5;break}return e.next=5,this.props.getTags();case 5:return console.log("img_id:",r),t.append("img_id",r),t.append("created_at",new Date(i).getTime()),this.props.startLoading(),"Update"===a?(t.append("image_name",o),t.append("image_desc",c),ea()(s,function(e,a){t.append("tags",e)}),t.append("api_type","update")):t.append("api_type","delete"),e.next=12,this.props.upsertImage(t,this.props.access);case 12:if(this.props.lastRespMsg!==be){e.next=22;break}return this.handleSnackBar("".concat(a," the selected image successfully."),"success"),e.next=16,this.props.getImages(this.props.userId,l,u);case 16:if(this.handleModalClose("uploadedImgs"),"Delete"!==a){e.next=20;break}return e.next=20,this.props.getAuthUser(this.props.access);case 20:e.next=23;break;case 22:this.handleSnackBar(Ee[this.props.lastRespMsg],"error");case 23:this.props.stopLoading();case 24:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}()},{key:"onInputChange",value:function(e,a){console.log(">>> onInputChange, e.target.value:",e.target.value);var t={};t["imgName"==a?"currImgName":"currImgDesc"]=e.target.value,this.setState(t)}},{key:"onDropdownChange",value:function(e,a){console.log(">>> onDropdownChange, data.name: ".concat(a.name,", data.value: ").concat(a.value));this.state.currTags;this.setState({currTags:a.value})}},{key:"handleModalClose",value:function(e){console.log(">>> handleModalClose");var a="profile"==e?{profileUpdateOpen:!1}:"avatar"==e?{avatarUpdateOpen:!1}:{imgUpdateOpen:!1};this.setState(a)}},{key:"handleModalOpen",value:function(e,a,t){console.log(">>> handleModalOpen");var n="profile"==e?{profileUpdateOpen:!0}:"avatar"==e?{avatarUpdateOpen:!0}:{imgUpdateOpen:!0};a&&(n.currImgSrc=a),t&&(n.currImgId=t.id,n.currImgName=t.image_name,n.currImgDesc=t.image_desc,n.currImgCreatedAt=t.created_at,n.currTags=t.tags),this.setState(n)}},{key:"handleSnackBar",value:function(e,a){this.props.enqueueSnackbar(e,{variant:a})}},{key:"onUpdateAvatar",value:function(){var e=Object(_.a)(U.a.mark(function e(){var a,t=this;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(">>> onUpdateAvatar. this.state.avatarFile: ",this.state.avatarFile),this.state.avatarFile){e.next=5;break}this.handleSnackBar("No image avatar file is uploaded.","error"),e.next=15;break;case 5:return this.props.startLoading(),(a=new FormData).append("avatar",this.state.avatarFile),e.next=10,this.props.updateAvatar(a,this.props.access,{onSuccess:function(){return t.handleSnackBar("Update avatar successfully.","success")},onFail:function(e){return t.handleSnackBar(Ee[e],"error")}});case 10:if(this.props.lastRespMsg!==be){e.next=14;break}return e.next=13,this.props.getAuthUser(this.props.access);case 13:this.handleModalClose("avatar");case 14:this.props.stopLoading();case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onUpdateProfile",value:function(){var e=Object(_.a)(U.a.mark(function e(a){var t,n,r,s,o,c=this;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(">>> onUpdateProfile.formVals:",a),t={},n=a.password,r=a.retypePassword,s=a.email,n!=r&&(t.password="Password and Retype Password field don't match."),n.length<8&&(t.password="Password length must be greater than 8."),ia(s)||(t.email="Not a valid email."),ta()(t)){e.next=8;break}return e.abrupt("return",t);case 8:return this.props.startLoading(),(o=new FormData).append("email",s),o.append("password",n),e.next=14,this.props.updateUser(o,this.props.access,{onSuccess:function(){return c.handleSnackBar("Update user successfully.","success")},onFail:function(e){return c.handleSnackBar(Ee[e],"error")}});case 14:if(this.props.lastRespMsg!==be){e.next=18;break}return e.next=17,this.props.getAuthUser(this.props.access);case 17:this.handleModalClose("profile");case 18:this.props.stopLoading();case 19:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}()},{key:"onFormValidate",value:function(e){console.log(">>> onFormValidate: ",e);var a={};return ea()(["email","password","retypePassword"],function(t){e[t]||(a[t]="Required field")}),a}},{key:"onDrop",value:function(e){var a=this;console.log(">>> onDrop.file:",e[0]);var t=new FileReader;t.onabort=function(){return console.log("file reading was aborted")},t.onerror=function(){return console.log("file reading has failed")},t.onload=function(){a.setState({avatarFile:e[0],updatedAvatar:t.result})},t.readAsDataURL(e[0])}},{key:"changeRightTabContent",value:function(e){this.setState({rightCardTab:e})}},{key:"onPageChange",value:function(){var e=Object(_.a)(U.a.mark(function e(a,t){var n,r;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(">>> ProfilePage.onPageChange.props:",t,this.props),n=this.props,n.userId,n.lastRespMsg,r=this.state.imgPerPage,Ge(),e.next=6,this.props.getImages(-1,t.activePage,r);case 6:Ve();case 7:case"end":return e.stop()}},e,this)}));return function(a,t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.props,t=a.userDetail,n=a.userProfile,r=(a.isLogin,a.classes),o=a.userId,c=a.userDtlFetched,i=a.data,l=(a.imgCount,a.numPages),u=a.tags,p=this.state,m=p.updatedAvatar,d=p.profileUpdateOpen,g=p.avatarUpdateOpen,h=p.imgUpdateOpen,f=p.rightCardTab,v=p.currImgSrc,b=p.currImgName,E=p.currImgDesc,C=p.currTags,k=new Date,I=(new Date).setDate(k.getDate()-120),w=new Array(120);ea()(n.activity,function(e,a){var t=k.getDate()-new Date(e[0]).getDate();w[t]={date:new Date(e[0]),count:e[1]}}),ea()(Ma()(120),function(e,a){w[a]||(w[a]={date:(new Date).setDate(k.getDate()-e),count:0})});var O=Ua()(u,function(e,a){return{key:e,text:e,value:a+1}});return s.a.createElement("div",{className:"div-profilePage-wrapper"},s.a.createElement(pa.a,{className:r.leftCard},c?s.a.createElement("div",{className:"div-leftCard-area"},s.a.createElement(ha.a,null,s.a.createElement(ba.a,{className:"Modal-updateAvatar",open:g,dimmer:"blurring",onClose:function(){return e.handleModalClose("avatar")},trigger:s.a.createElement(Ea.a,{onClick:function(){return e.handleModalOpen("avatar")},src:n.avatar,wrapped:!0,className:"Image-profileAvatar"})},s.a.createElement(ba.a.Header,null,"Profile Picture"),s.a.createElement(ba.a.Content,{image:!0},s.a.createElement(Ea.a,{size:"medium",src:m||n.avatar,wrapped:!0}),s.a.createElement(ba.a.Description,null,s.a.createElement(pa.a,{className:r.updateAvatarArea},s.a.createElement(ha.a,{className:r.updateAvatarArea},s.a.createElement(Ra.a,{multiple:!1,onDrop:this.onDrop},function(e){var a=e.getRootProps,t=e.getInputProps;return s.a.createElement("section",null,s.a.createElement("div",a(),s.a.createElement("input",t()),s.a.createElement("span",{className:"span-drapdropText"},s.a.createElement($.a,null),"Drag and drop image here, or click to select image to upload.")))}))))),s.a.createElement(Ca.a,{className:"Button-updateAvatar",onClick:this.onUpdateAvatar},"Change"))),s.a.createElement(ma.a,{className:r.leftCardContent},s.a.createElement(ka.a,{className:"Label-profile"},s.a.createElement(Ia.a,{name:"user"}),"Username: ",t.username),s.a.createElement(ka.a,{className:"Label-profile"},s.a.createElement(Ia.a,{name:"info"}),"User ID: ",o),s.a.createElement(ka.a,{className:"Label-profile"},s.a.createElement(Ia.a,{name:"mail"}),"Email: ",t.email),s.a.createElement(ka.a,{className:"Label-profile"},s.a.createElement(Ia.a,{name:"add to calendar"}),"Joined In: ",va()(new Date(t.createdAt)).format("MM-DD-YYYY")),s.a.createElement(ka.a,{className:"Label-profile"},s.a.createElement(Ia.a,{name:"sign-in"}),"Last Login: ",va()(new Date(t.lastLoginAt)).format("MM-DD-YYYY HH:mm A")),s.a.createElement(ka.a,{className:"Label-profile"},s.a.createElement(Ia.a,{name:"undo"}),"Last Update: ",n.lastProfileEdit?va()(new Date(n.lastProfileEdit)).format("MM-DD-YYYY HH:mm A"):"N/A"),s.a.createElement(ka.a,{className:"Label-profile"},s.a.createElement(Ia.a,{name:"image"}),"Images: ",n.noOfImgs)),s.a.createElement(Ze.b,{onSubmit:this.onUpdateProfile,validate:this.onFormValidate,render:function(a){var t=a.handleSubmit;a.submitting,a.pristine;return s.a.createElement(ba.a,{className:"Modal-updateProfile",open:d,dimmer:"blurring",onClose:function(){return e.handleModalClose("profile")},trigger:s.a.createElement(Ca.a,{onClick:function(){return e.handleModalOpen("profile")},className:"Button-updateProfile"},"Update Profile")},s.a.createElement(ba.a.Header,null,"Update Profile"),s.a.createElement(ba.a.Content,{image:!0},s.a.createElement(ba.a.Description,null,s.a.createElement("form",{className:"form-updateUser",onSubmit:t},s.a.createElement(wa.a,null,s.a.createElement(Ze.a,{fullWidth:!0,required:!0,name:"email",type:"text",render:function(e){var a=e.input,t=e.meta;return s.a.createElement("div",{className:"div-inlineGrid"},s.a.createElement(We.a,{label:"Email",onChange:a.onChange,className:r.textField,margin:"normal",error:t.submitFailed&&!!t.error,variant:"outlined",InputProps:{startAdornment:s.a.createElement(Je.a,{position:"start"},s.a.createElement(ca.a,null))}}),s.a.createElement("span",{className:"span-metaError"},t.dirty?t.submitError:t.modified?t.error:""))}})),s.a.createElement(wa.a,null,s.a.createElement(Ze.a,{fullWidth:!0,required:!0,name:"password",render:function(e){var a=e.input,t=e.meta;return s.a.createElement("div",{className:"div-inlineGrid"},s.a.createElement(We.a,{type:"password",label:"Password",onChange:a.onChange,className:r.textField,margin:"normal",error:t.submitFailed&&!!t.error,variant:"outlined",InputProps:{startAdornment:s.a.createElement(Je.a,{position:"start"},s.a.createElement(Qe.a,null))}}),s.a.createElement("span",{className:"span-metaError"},t.dirty?t.submitError:t.modified?t.error:""))}})),s.a.createElement(wa.a,null,s.a.createElement(Ze.a,{fullWidth:!0,required:!0,name:"retypePassword",render:function(e){var a=e.input,t=e.meta;return s.a.createElement("div",{className:"div-inlineGrid"},s.a.createElement(We.a,{label:"Retype Password",type:"password",onChange:a.onChange,className:r.textField,margin:"normal",error:t.submitFailed&&!!t.error,variant:"outlined",InputProps:{startAdornment:s.a.createElement(Je.a,{position:"start"},s.a.createElement(Qe.a,null))}}),s.a.createElement("span",{className:"span-metaError"},t.dirty?t.submitError:t.modified?t.error:""))}})),s.a.createElement(Ca.a,{className:"Button-updateSubmit",type:"submit"},"Update")))))}})):s.a.createElement(ga.a,{className:"Loader-profile",type:"line-scale-pulse-out-rapid",color:"#000000",active:!0})),s.a.createElement(pa.a,{className:r.rightCard},s.a.createElement(Ca.a.Group,{labeled:!0,icon:!0,className:"ButtonGroup-profile"},s.a.createElement(Ca.a,{onClick:function(){return e.changeRightTabContent("userActivity")},icon:"braille",active:"userActivity"==f,content:"User Activity"}),s.a.createElement(Ca.a,{onClick:function(){return e.changeRightTabContent("uploadedImgs")},icon:"images outline",active:"uploadedImgs"==f,content:"Uploaded Images"})),"uploadedImgs"==f?s.a.createElement(s.a.Fragment,null,s.a.createElement(Oa.a,{horizontal:!0},s.a.createElement(ya.a,{as:"h4"},s.a.createElement(Ia.a,{name:"images outline"}),"Uploaded Images")),s.a.createElement("div",{className:"div-uploadedImgs-wrapper"},s.a.createElement(Sa.a,{className:"Pagination-uploadedImgs",defaultActivePage:1,ellipsisItem:{content:s.a.createElement(Ia.a,{name:"ellipsis horizontal"}),icon:!0},firstItem:{content:s.a.createElement(Ia.a,{name:"angle double left"}),icon:!0},lastItem:{content:s.a.createElement(Ia.a,{name:"angle double right"}),icon:!0},prevItem:{content:s.a.createElement(Ia.a,{name:"angle left"}),icon:!0},nextItem:{content:s.a.createElement(Ia.a,{name:"angle right"}),icon:!0},onPageChange:this.onPageChange,totalPages:l}),0==i.length?s.a.createElement("div",{className:"div-noImage-placeholder"},s.a.createElement("span",{className:"span-noImages"},s.a.createElement(Ia.a,{name:"images"})," No Images")):s.a.createElement(pa.a,{className:"Card-imgs"},s.a.createElement(wa.a,{columns:3,className:"Grid-img-wrapper"},Ua()(i,function(a,t){var n=a.image_file;return s.a.createElement(wa.a.Column,{key:"GridCol-"+t,onClick:function(){return e.handleModalOpen("uploadedImgs",n,a)}},s.a.createElement(pa.a,{className:"Card-img"},s.a.createElement(Ea.a,{className:"Image-uploadedImgs",src:n})))}))))):s.a.createElement(s.a.Fragment,null,s.a.createElement(Oa.a,{horizontal:!0},s.a.createElement(ya.a,{as:"h4"},s.a.createElement(Ia.a,{name:"braille"}),"User Activity")),s.a.createElement("div",{className:"div-calendarHeatmap-wrapper"},s.a.createElement(Ba.a,{startDate:I,endDate:k,values:w,classForValue:function(e){return 0==e.count?"color-heatmap-0":e.count<=4&&e.count>0?"color-heatmap-1":e.count<=8&&e.count>4?"color-heatmap-2":e.count<=12&&e.count>8?"color-heatmap-3":e.count<=16&&e.count>12?"color-heatmap-4":e.count>16?"color-heatmap-5":void 0},showWeekdayLabels:!0,gutterSize:4,tooltipDataAttrs:function(e){var a=new Date(e.date);return{"data-tip":"".concat(a.toGMTString().split(", ")[1].slice(0,11))+"<br/> Uploaded Images: ".concat(e.count)}}}),s.a.createElement(Va.a,{multiline:!0})))),s.a.createElement(ba.a,{className:"Modal-updateImage",open:h,dimmer:"blurring",onClose:function(){return e.handleModalClose("uploadedImgs")}},s.a.createElement(ba.a.Header,null,"Update Image"),s.a.createElement(ba.a.Content,{image:!0},s.a.createElement(Ea.a,{wrapped:!0,size:"medium",src:v}),s.a.createElement("div",{className:"div-updateImage-wrapper"},s.a.createElement(Pa.a,{icon:"list",iconPosition:"left",placeholder:"Image name",className:"Input-imgName",value:b,onChange:function(a){return e.onInputChange(a,"imgName")}}),s.a.createElement(Pa.a,{icon:"newspaper outline",iconPosition:"left",placeholder:"Image description",className:"Input-imgDesc",value:E,onChange:function(a){return e.onInputChange(a,"imgDesc")}}),s.a.createElement(La.a,{className:"Dropdown-tags",placeholder:"Tags",value:C,onChange:this.onDropdownChange,renderLabel:function(e){return{color:"blue",icon:"tag",content:e.text}},multiple:!0,search:!0,selection:!0,options:O}))),s.a.createElement("div",{className:"div-deleteUpdateImageButton-wrapper"},s.a.createElement(Ca.a,{onClick:function(){return e.onClickUpdateImage("Delete")},className:"Button-deleteImage"},"Delete"),s.a.createElement(Ca.a,{onClick:function(){return e.onClickUpdateImage("Update")},className:"Button-updateImage"},"Update"))))}}]),a}(s.a.Component),Wa=Object(Ne.e)(Object(d.c)(function(e){return{lastRespMsg:e.userReducer.lastRespMsg,access:e.userReducer.access,isLogin:e.userReducer.isLogin,userId:e.userReducer.userId,userDetail:e.userReducer.userDetail,userProfile:e.userReducer.userProfile,userDtlFetched:e.userReducer.userDtlFetched,data:e.apiReducer.data,imgCount:e.apiReducer.imgCount,numPages:e.apiReducer.numPages,tags:e.apiReducer.tags}},function(e){return Object(f.b)({getAuthUser:we,userLogout:Se,upsertImage:xa,getImages:Da,updateAvatar:Oe,getTags:ja,verifyJWTToken:Ie,startLoading:Ge,stopLoading:Ve,updateUser:ye},e)})(Object(Re.a)(function(e){return{leftCard:{width:"300px",minHeight:"500px"},leftCardContent:{paddingLeft:"0px"},updateAvatarArea:{height:"100%"},rightCard:{width:"600px",minHeight:"550px",marginLeft:"20px"}}})(Object(na.withSnackbar)(za)))),qa=(t(944),t(945),function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(u.a)(this,Object(p.a)(a).call(this,e))).state={files:[],imgNames:null,imgDescs:null,tags:null,modifiedTags:[]},t.onDrop=t.onDrop.bind(Object(M.a)(t)),t.onFormSubmit=t.onFormSubmit.bind(Object(M.a)(t)),t.onInputChange=t.onInputChange.bind(Object(M.a)(t)),t.onDropdownChange=t.onDropdownChange.bind(Object(M.a)(t)),t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"handleSnackBar",value:function(e,a){this.props.enqueueSnackbar(e,{variant:a})}},{key:"onDrop",value:function(e){var a=this;console.log(">>> onDrop.acceptedFiles:",e);var t=[],n=[];ea()(e,function(r,s){r.target;var o=new FileReader;o.onabort=function(){return console.log("file reading was aborted")},o.onerror=function(){return console.log("file reading has failed")},o.onload=function(){t.push(r),n.push(o.result),s==e.length-1&&a.setState({files:t,prevs:n,imgNames:new Array(e.length).fill(""),imgDescs:new Array(e.length).fill(""),tags:new Array(e.length).fill(new Array)})},o.readAsDataURL(r)})}},{key:"onFormSubmit",value:function(){var e=Object(_.a)(U.a.mark(function e(a){var t,n,r,s,o,c,i,l,u;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),t=this.state,n=t.files,r=t.imgNames,s=t.imgDescs,o=t.tags,this.props.startLoading(),c=localStorage.getItem("access"),i=!0,l=0;case 6:if(!(l<n.length)){e.next=22;break}return(u=new FormData).append("image_name",r[l]),u.append("image_desc",s[l]),u.append("image_file",n[l]),u.append("api_type","insert"),ea()(o[l],function(e,a){u.append("tags",o[l][a])}),e.next=15,this.props.upsertImage(u,c);case 15:if(this.props.lastRespMsg===be){e.next=19;break}return this.handleSnackBar(Ee[this.props.lastRespMsg],"error"),i=!1,e.abrupt("break",22);case 19:l++,e.next=6;break;case 22:this.props.stopLoading(),i&&(this.handleSnackBar("Upload images successfully.","success"),this.setState({files:[],imgNames:null,imgDescs:null}));case 24:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}()},{key:"onDropdownChange",value:function(e,a){console.log(">>> onDropdownChange, data.name: ".concat(a.name,", data.value: ").concat(a.value));var t=this.state.tags,n=a.name.split("-");t[parseInt(n[1])]=a.value,this.setState({tags:t})}},{key:"onInputChange",value:function(e){var a=e.target.value,t=e.target.name;console.log(">>> onInputChange.eName, eVal : ",t,a);var n=this.state,r=n.imgNames,s=n.imgDescs,o=t.split("-");"imgName"==o[0]?(r[parseInt(o[1])]=a,this.setState({imgNames:r})):"imgDesc"==o[0]&&(s[parseInt(o[1])]=a,this.setState({imgDescs:s}))}},{key:"componentDidMount",value:function(){var e=Object(_.a)(U.a.mark(function e(){var a,t;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("access"),t=localStorage.getItem("refresh"),e.next=4,this.props.verifyJWTToken(a,t);case 4:if(this.props.isLogin){e.next=7;break}return e.next=7,this.props.userLogout();case 7:this.state.modifiedTags=Ua()(this.props.tags,function(e,a){return{key:e,text:e,value:a+1}});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.props.classes,t=this.state,n=t.files,r=t.modifiedTags;return s.a.createElement("div",{className:"div-uploadPage-wrapper"},s.a.createElement("form",{className:"form-upload",onSubmit:this.onFormSubmit,encType:"multipart/form-data"},s.a.createElement(pa.a,{className:a.uploadCard},s.a.createElement(ha.a,{className:a.cardActionArea},s.a.createElement(Ra.a,{onDrop:this.onDrop},function(e){var t=e.getRootProps,n=e.getInputProps;return s.a.createElement("section",null,s.a.createElement("div",t(),s.a.createElement("input",n()),s.a.createElement("span",{className:"span-drapdropText"},s.a.createElement($.a,{className:a.AddPhotoIcon}),"Drag and drop some files here, or click to select files to upload.")))}))),s.a.createElement(pa.a,{className:a.pendingUpload},s.a.createElement(Oa.a,{horizontal:!0},s.a.createElement(ya.a,{as:"h4"},s.a.createElement(Ia.a,{name:"images outline"}),"Upload Images")),0==n.length&&s.a.createElement("div",{className:"div-placeholder"}),n.length>0&&Ua()(n,function(a,t){return s.a.createElement("div",{key:a.name+t,className:"div-uploadField"},s.a.createElement("div",{className:""},s.a.createElement(Pa.a,{icon:"list",iconPosition:"left",placeholder:"Image name",className:"Input-imgName",name:"imgName-"+t,value:e.state.imgNames[parseInt(t)],onChange:e.onInputChange}),s.a.createElement(Pa.a,{icon:"newspaper outline",iconPosition:"left",placeholder:"Image description",className:"Input-imgDesc",name:"imgDesc-"+t,value:e.state.imgDescs[parseInt(t)],onChange:e.onInputChange}),s.a.createElement(La.a,{className:"Dropdown-tags",placeholder:"Tags",name:"tags-"+t,onChange:e.onDropdownChange,renderLabel:function(e){return{color:"blue",icon:"tag",content:e.text}},multiple:!0,search:!0,selection:!0,options:r})),s.a.createElement("div",null,s.a.createElement("img",{src:e.state.prevs[t],className:"img-preview"})))}),n.length>0&&s.a.createElement(Ca.a,{type:"submit",className:"Button-submit"}," Submit "))))}}]),a}(s.a.Component)),Ha=Object(d.c)(function(e){return{lastRespMsg:e.apiReducer.lastRespMsg,tags:e.apiReducer.tags,isLogin:e.userReducer.isLogin}},function(e){return Object(f.b)({upsertImage:xa,verifyJWTToken:Ie,startLoading:Ge,stopLoading:Ve,userLogout:Se},e)})(Object(Re.a)(function(e){return{uploadCard:{textAlign:"center",width:"40%",height:"100%"},pendingUpload:{width:"55%",marginLeft:"10px"},AddPhotoIcon:{margin:"auto",display:"block"}}})(Object(na.withSnackbar)(qa))),Ya=t(146),Ja=(t(946),t(1026)),Ka=t(1029),Qa=t(1021),Xa=t(1027),Za=t(486),$a=t.n(Za),et=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(u.a)(this,Object(p.a)(a).call(this,e))).state={currPage:1,imgPerPage:"12",selectedTags:[],isContentLoading:!1,imgPreviewOpen:!1,currImgDesc:"",currImgName:"",currImgSrc:"",currImgCreatedAt:"",currTags:[],searchVal:""},t.onPageChange=t.onPageChange.bind(Object(M.a)(t)),t.onPerPageChange=t.onPerPageChange.bind(Object(M.a)(t)),t.onDropdownChange=t.onDropdownChange.bind(Object(M.a)(t)),t.onClickLabel=t.onClickLabel.bind(Object(M.a)(t)),t.handleContentLoading=t.handleContentLoading.bind(Object(M.a)(t)),t.onClickClearTags=t.onClickClearTags.bind(Object(M.a)(t)),t.handleModalClose=t.handleModalClose.bind(Object(M.a)(t)),t.handleModalOpen=t.handleModalOpen.bind(Object(M.a)(t)),t.onImageClick=t.onImageClick.bind(Object(M.a)(t)),t.handleSearchChange=t.handleSearchChange.bind(Object(M.a)(t)),t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"handleModalClose",value:function(){var e;console.log(">>> handleModalClose"),this.setState((e={currImgName:""},Object(Ya.a)(e,"currImgName",""),Object(Ya.a)(e,"currImgSrc",""),Object(Ya.a)(e,"currTags",[]),Object(Ya.a)(e,"currImgCreatedAt",""),Object(Ya.a)(e,"imgPreviewOpen",!1),e))}},{key:"handleModalOpen",value:function(){console.log(">>> handleModalOpen")}},{key:"onImageClick",value:function(e,a,t,n,r){console.log(">>> onImageClick"),this.setState({currImgName:e,currImgDesc:a,currImgSrc:t,currTags:n,currImgCreatedAt:r,imgPreviewOpen:!0})}},{key:"componentDidMount",value:function(){var e=Object(_.a)(U.a.mark(function e(){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Ge(),this.props.userId,e.next=4,this.props.getImages(-1,1,12,[],"");case 4:if(this.props.tags){e.next=7;break}return e.next=7,this.props.getTags();case 7:Ve();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onPageChange",value:function(){var e=Object(_.a)(U.a.mark(function e(a,t){var n,r,s,o,c;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(">>> HomePage.onPageChange.props:",t,this.props),n=this.props,n.userId,n.lastRespMsg,r=this.state,s=r.imgPerPage,o=r.selectedTags,c=r.searchVal,this.handleContentLoading("start"),e.next=6,this.props.getImages(-1,t.activePage,s,o,c);case 6:this.handleContentLoading("stop");case 7:case"end":return e.stop()}},e,this)}));return function(a,t){return e.apply(this,arguments)}}()},{key:"onDropdownChange",value:function(){var e=Object(_.a)(U.a.mark(function e(a,t){var n,r,s,o;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(">>> onDropdownChange.dropdownObj.value: ",t.value),this.setState({selectedTags:t.value}),n=this.state,r=n.imgPerPage,s=n.searchVal,o=this.props.currPage,this.handleContentLoading("start"),e.next=7,this.props.getImages(-1,o,r,t.value,s);case 7:this.handleContentLoading("stop");case 8:case"end":return e.stop()}},e,this)}));return function(a,t){return e.apply(this,arguments)}}()},{key:"onPerPageChange",value:function(){var e=Object(_.a)(U.a.mark(function e(a,t){var n,r,s,o;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(">>> onPerPageChange:",t),this.setState({currPage:1,imgPerPage:t.value}),n=this.state,r=n.currPage,s=n.searchVal,o=n.selectedTags,this.handleContentLoading("start"),e.next=6,this.props.getImages(-1,r,t.value,o,s);case 6:this.handleContentLoading("stop");case 7:case"end":return e.stop()}},e,this)}));return function(a,t){return e.apply(this,arguments)}}()},{key:"onClickLabel",value:function(){var e=Object(_.a)(U.a.mark(function e(a){var t,n,r,s,o;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.selectedTags,n=t.slice(0,a).concat(t.slice(a+1,t.length)),this.setState({currPage:1,selectedTags:n}),r=this.state,r.currPage,s=r.imgPerPage,o=r.searchVal,this.handleContentLoading("start"),e.next=7,this.props.getImages(-1,1,s,n,o);case 7:this.handleContentLoading("stop");case 8:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}()},{key:"onClickClearTags",value:function(){var e=Object(_.a)(U.a.mark(function e(){var a,t,n;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state,t=a.imgPerPage,n=a.searchVal,this.setState({currPage:1,selectedTags:[]}),this.handleContentLoading("start"),e.next=5,this.props.getImages(-1,1,t,[],n);case 5:this.handleContentLoading("stop");case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleSearchChange",value:function(){var e=Object(_.a)(U.a.mark(function e(a,t){var n,r;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state,r=n.imgPerPage,n.selectedTags,this.setState({currPage:1,selectedTags:[],searchVal:t.value}),this.handleContentLoading("start"),e.next=5,this.props.getImages(-1,1,r,[],t.value);case 5:this.handleContentLoading("stop");case 6:case"end":return e.stop()}},e,this)}));return function(a,t){return e.apply(this,arguments)}}()},{key:"handleContentLoading",value:function(e){var a=this;"start"===e?this.setState({isContentLoading:!0}):setTimeout(function(){a.setState({isContentLoading:!1})},300)}},{key:"render",value:function(){var e=this,a=this.props,t=(a.classes,a.isLoading,a.userId,a.lastRespMsg,a.data),n=(a.imgCount,a.numPages),r=a.tags,o=this.state,c=o.imgPerPage,i=(o.currPage,o.selectedTags),l=o.isContentLoading,u=o.imgPreviewOpen,p=o.currImgSrc,m=o.currImgName,d=o.currImgDesc,g=o.currTags,h=o.currImgCreatedAt,f=o.searchVal,v=["red","orange","yellow","olive","green","teal","blue","violet","purple","pink","brown","grey","black"],b=Ua()(r,function(e,a){return{key:e,text:e,value:a+1}});return s.a.createElement("div",{className:"div-homePage-wrapper"},s.a.createElement("div",{className:"div-pageWidgets-wrapper"},s.a.createElement(ba.a,{className:"Modal-imageViewer",open:u,dimmer:"blurring",onClose:function(){return e.handleModalClose()}},s.a.createElement(Ja.a,{basic:"very",celled:!0,collapsing:!0,className:"Table-imgDescContent"},s.a.createElement(Ja.a.Body,null,s.a.createElement(Ja.a.Row,null,s.a.createElement(Ja.a.Cell,{className:"TableCell-imgDescContent-key"},s.a.createElement(Ia.a,{name:"list"}),"Name:"),s.a.createElement(Ja.a.Cell,{className:"TableCell-imgDescContent-val"},m)),s.a.createElement(Ja.a.Row,null,s.a.createElement(Ja.a.Cell,{className:"TableCell-imgDescContent-key"},s.a.createElement(Ia.a,{name:"newspaper outline"}),"Description:"),s.a.createElement(Ja.a.Cell,{className:"TableCell-imgDescContent-val"},d)),s.a.createElement(Ja.a.Row,null,s.a.createElement(Ja.a.Cell,{className:"TableCell-imgDescContent-key"},s.a.createElement(Ia.a,{name:"calendar alternate outline"}),"Uploaded Date:"),s.a.createElement(Ja.a.Cell,{className:"TableCell-imgDescContent-val"},h)),s.a.createElement(Ja.a.Row,null,s.a.createElement(Ja.a.Cell,{className:"TableCell-imgDescContent-key"},s.a.createElement(Ia.a,{name:"tags"}),"Tags:"),s.a.createElement(Ja.a.Cell,{className:"TableCell-imgDescContent-val"},Ua()(g,function(e,a){return s.a.createElement(ka.a,{className:"Label-tags",key:"currLabel-"+a},r[g[a]-1])}))))),s.a.createElement(Ea.a,{src:p,wrapped:!0})),s.a.createElement(Sa.a,{defaultActivePage:1,ellipsisItem:{content:s.a.createElement(Ia.a,{name:"ellipsis horizontal"}),icon:!0},firstItem:{content:s.a.createElement(Ia.a,{name:"angle double left"}),icon:!0},lastItem:{content:s.a.createElement(Ia.a,{name:"angle double right"}),icon:!0},prevItem:{content:s.a.createElement(Ia.a,{name:"angle left"}),icon:!0},nextItem:{content:s.a.createElement(Ia.a,{name:"angle right"}),icon:!0},onPageChange:this.onPageChange,totalPages:n}),s.a.createElement(Ka.a,{className:"Search-image",input:{icon:"search",iconPosition:"right"},onSearchChange:$a()(this.handleSearchChange,500,{leading:!0}),showNoResults:!1,loading:l,value:f}),s.a.createElement("div",{className:"div-choosePageSelect"},s.a.createElement("span",{className:"span-imgPerPage"},"Images per page:"),s.a.createElement(Qa.a,{onChange:this.onPerPageChange,value:c,options:[{key:"12",value:"12",text:"12 images per page"},{key:"24",value:"24",text:"24 images per page"}]}))),s.a.createElement("div",{className:"div-tagsGrid-wrapper"},s.a.createElement(Xa.a,{className:"Card-tags",color:"blue"},s.a.createElement(Oa.a,{horizontal:!0},s.a.createElement(ya.a,{className:"Header-title",as:"h4"},s.a.createElement(Ia.a,{name:"tags"}),"Availale Tags")),s.a.createElement(La.a,{placeholder:"Tags",className:"Dropdown-tags",value:i,multiple:!0,minCharacters:2,search:!0,selection:!0,options:b,renderLabel:function(){return null},onChange:this.onDropdownChange}),s.a.createElement(Ca.a,{className:"Button-clearSelectedTags",content:"Clear selected tags",onClick:this.onClickClearTags}),s.a.createElement(Oa.a,{horizontal:!0},s.a.createElement(ya.a,{className:"Header-title",as:"h4"},s.a.createElement(Ia.a,{name:"check"}),s.a.createElement(Ia.a,{name:"tags"}),"Selected Tags")),s.a.createElement("div",{className:"div-selectedTags-wrapper"},Ua()(i,function(a,t){return s.a.createElement(ka.a,{onClick:function(){return e.onClickLabel(t)},className:"Label-tags",key:"Label-"+t},r[i[t]-1])}),0==i.length&&s.a.createElement(ka.a,{className:"Label-tags"},"No tags selected"))),s.a.createElement(Xa.a,{className:"Card-imgs",color:"blue"},s.a.createElement(wa.a,{padded:!0,columns:4,className:"Grid-img-wrapper"},l?s.a.createElement("div",{className:"div-contentLoader"},s.a.createElement(ga.a,{type:"line-scale-pulse-out-rapid",color:"#000000",active:!0})):t&&0==t.length||!t?s.a.createElement("div",{className:"div-noImage-placeholder"},s.a.createElement("span",{className:"span-noImages"},s.a.createElement(Ia.a,{name:"images"})," No Images")):Ua()(t,function(a,t){var n=a.image_file,r=a.image_name,o=a.image_desc,c=a.tags,i=va()(new Date(a.created_at)).format("MM-DD-YYYY");return s.a.createElement(wa.a.Column,{key:"GridCol-"+t},s.a.createElement(Xa.a,{onClick:function(){return e.onImageClick(r,o,n,c,i)},className:"Card-img",color:v[t%12]},s.a.createElement(Ea.a,{src:n})))})))))}}]),a}(s.a.Component),at=Object(d.c)(function(e){return{isLoading:e.uiReducer.isLoading,userId:e.userReducer.userId,lastRespMsg:e.apiReducer.lastRespMsg,data:e.apiReducer.data,imgCount:e.apiReducer.imgCount,numPages:e.apiReducer.numPages,currPage:e.apiReducer.currPage,tags:e.apiReducer.tags}},function(e){return Object(f.b)({startLoading:Ge,stopLoading:Ve,getImages:Da,getTags:ja},e)})(Object(Re.a)(function(e){return{gridList:{},subheader:{height:"auto"}}})(et)),tt=function(e){var a=e.component,t=Object(Be.a)(e,["component"]);return s.a.createElement(Ne.b,Object.assign({},t,{render:function(e){return t.isLogin?s.a.createElement(a,e):s.a.createElement(Ne.a,{to:{pathname:ge,state:{from:e.location}}})}}))},nt=function(e){var a=e.component,t=Object(Be.a)(e,["component"]);return s.a.createElement(Ne.b,Object.assign({},t,{render:function(e){return t.isLogin?s.a.createElement(Ne.a,{to:{pathname:fe,state:{from:e.location}}}):s.a.createElement(a,e)}}))},rt=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(u.a)(this,Object(p.a)(a).call(this,e))).state={},t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(_.a)(U.a.mark(function e(){var a,t;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.startLoading(),a=localStorage.getItem("access"),t=localStorage.getItem("refresh"),e.next=5,this.props.verifyJWTToken(a,t);case 5:if(!this.props.isLogin){e.next=8;break}return e.next=8,this.props.getAuthUser(a);case 8:this.props.stopLoading();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.isLogin;return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement(Ne.b,{path:de,exact:!0,component:at}),s.a.createElement(nt,{isLogin:e,path:ge,component:sa}),s.a.createElement(nt,{isLogin:e,path:he,component:ua}),s.a.createElement(tt,{isLogin:e,path:ve,exact:!0,component:Ha}),s.a.createElement(tt,{isLogin:e,path:fe,component:Wa})))}}]),a}(r.Component),st=Object(d.c)(function(e){return{isLogin:e.userReducer.isLogin}},function(e){return Object(f.b)({verifyJWTToken:Ie,getAuthUser:we,startLoading:Ge,stopLoading:Ve},e)})(rt),ot=(t(948),t(489)),ct=Object(ot.a)(function(e){return s.a.createElement("div",{className:"div-loaderDisplay-wrapper"},s.a.createElement("div",{className:"div-loaderDisplay-cover"}),s.a.createElement("div",{className:"div-loader-wrapper"},s.a.createElement(ga.a,{type:"line-scale-pulse-out-rapid",color:"#000000",active:!0})))}),it=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(u.a)(this,Object(p.a)(a).call(this,e))).state={isDrawerOpen:!1},t.handleDrawerAction=t.handleDrawerAction.bind(Object(M.a)(t)),t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(_.a)(U.a.mark(function e(){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.startLoading(),e.next=3,this.props.getTags();case 3:this.props.stopLoading();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleDrawerAction",value:function(){this.setState({isDrawerOpen:!this.state.isDrawerOpen})}},{key:"render",value:function(){var e=this.state.isDrawerOpen,a=this.props.isLoading;return s.a.createElement("div",{className:"div-layout-wrapper"},s.a.createElement(Me,{isDrawerOpen:e,handleDrawerAction:this.handleDrawerAction}),s.a.createElement("div",{className:a?"full-opacity":"full-transparents"},s.a.createElement(ct,null)),s.a.createElement("div",{className:"div-layoutContent-wrapper "+(e?"div-collapsed":"")},s.a.createElement(st,null)),s.a.createElement(Fe,null))}}]),a}(s.a.Component),lt=Object(d.c)(function(e){return{isLogin:e.userReducer.isLogin,isLoading:e.uiReducer.isLoading}},function(e){return Object(f.b)({startLoading:Ge,stopLoading:Ve,getTags:ja},e)})(it),ut=function(e){function a(){return Object(i.a)(this,a),Object(u.a)(this,Object(p.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){Object(h.loadReCaptcha)()}},{key:"render",value:function(){return s.a.createElement(d.a,{store:j},s.a.createElement("div",{className:"App"},s.a.createElement(g.a,{history:D},s.a.createElement(na.SnackbarProvider,{maxSnack:5,dense:!0,preventDuplicate:!0,autoHideDuration:2e3,anchorOrigin:{vertical:"bottom",horizontal:"right"}},s.a.createElement(lt,null)))))}}]),a}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(ut,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[516,1,2]]]);
//# sourceMappingURL=main.7551399c.chunk.js.map
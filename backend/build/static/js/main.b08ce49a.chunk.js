(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{514:function(e,a,t){e.exports=t(947)},519:function(e,a,t){},566:function(e,a,t){},568:function(e,a,t){},588:function(e,a){},590:function(e,a){},627:function(e,a){},628:function(e,a){},688:function(e,a,t){},689:function(e,a,t){},690:function(e,a,t){},711:function(e,a,t){},712:function(e,a,t){},943:function(e,a,t){},945:function(e,a,t){},946:function(e,a,t){},947:function(e,a,t){"use strict";t.r(a);var n,r=t(0),s=t.n(r),o=t(21),i=t.n(o),c=(t(519),t(39)),l=t(40),u=t(42),p=t(41),d=t(43),m=t(38),g=t(163),h=t(135),f=t(31),v=t(453),b=t(33),E=t.n(b),C="UI_START_LOADING",I="UI_STOP_LOADING",k={isLogin:!1,userDtlFetched:!1,lastRespMsg:"",access:"",refresh:"",userId:-1,userDetail:{username:"",email:"",createdAt:"",lastLoginAt:""},userProfile:{avatar:"",lastProfileEdit:"",noOfImgs:0,activity:[]}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"USER_LOGIN_SUCCESS":return E()({},e,{lastRespMsg:a.lastRespMsg,isLogin:!0,access:a.access,refresh:a.refresh,userId:a.userId,userDetail:a.userDetail,userDtlFetched:!0,userProfile:a.userProfile});case"USER_LOGIN_FAIL":return E()({},e,{lastRespMsg:a.lastRespMsg,isLogin:!1,access:"",refresh:"",userId:-1,userDetail:{},userDtlFetched:!1,userProfile:{}});case"USER_VERIFY_TOKEN_SUCCESS":return E()({},e,{lastRespMsg:a.lastRespMsg,userId:a.userId,isLogin:!0,access:a.access,refresh:a.refresh});case"USER_VERIFY_TOKEN_FAIL":return E()({},e,{lastRespMsg:a.lastRespMsg,isLogin:!1,userId:-1,access:"",refresh:"",userDetail:{},userDtlFetched:!1,userProfile:{}});case"USER_SIGNUP_SUCCESS":case"USER_SIGNUP_FAIL":return E()({},e,{lastRespMsg:a.lastRespMsg});case"GET_USER_SUCCESS":return E()({},e,{lastRespMsg:a.lastRespMsg,userDetail:a.userDetail,userDtlFetched:!0,userProfile:a.profile});case"GET_USER_FAIL":return E()({},e,{lastRespMsg:a.lastRespMsg,userDetail:{},userId:-1,userDtlFetched:!1,userProfile:{}});case"UPDATE_AVATAR_SUCCESS":case"UPDATE_AVATAR_FAIL":case"UPDATE_USER_SUCCESS":case"UPDATE_USER_FAIL":return E()({},e,{lastRespMsg:a.lastRespMsg});case"USER_LOGOUT":return E()({},e,{lastRespMsg:a.lastRespMsg,isLogin:!1,access:"",refresh:"",userId:-1,userDetail:{},userDtlFetched:!1,userProfile:{}});default:return e}},O={isLoading:!0,isReadyRedirect:!1},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;switch((arguments.length>1?arguments[1]:void 0).type){case C:return E()({},e,{isLoading:!0});case I:return E()({},e,{isLoading:!1});default:return e}},S={lastRespMsg:"00000",data:null,imgCount:-1,numPages:-1,currPage:-1,tags:[]},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"API_UPLOAD_SUCCESS":case"API_UPLOAD_FAIL":return E()({},e,{lastRespMsg:a.lastRespMsg});case"API_GET_IMAGE_SUCCESS":return E()({},e,{lastRespMsg:a.lastRespMsg,data:a.data,imgCount:a.imgCount,numPages:a.numPages,currPage:a.currPage});case"API_GET_IMAGE_FAIL":return E()({},e,{lastRespMsg:a.lastRespMsg});case"API_GET_TAGS_SUCCESS":return E()({},e,{lastRespMsg:a.lastRespMsg,tags:a.tags});case"API_GET_TAGS_FAIL":return E()({},e,{lastRespMsg:a.lastRespMsg,tags:[]});default:return e}},L=t(455),x=t(86),R=t(329),N=Object(v.createLogger)({}),A=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||f.d,j=Object(x.a)(),D=Object(f.e)((n=j,Object(f.c)({router:Object(g.b)(n),userReducer:y,uiReducer:w,apiReducer:P})),A(Object(f.a)(Object(R.a)(j)),Object(f.a)(L.a),Object(f.a)(N))),_=t(12),U=t.n(_),F=t(24),T=t(19),M=(t(566),t(567),t(568),t(1005)),B=t(1006),G=t(1007),z=t(489),V=t(1028),W=t(456),H=t.n(W),q=t(459),J=t.n(q),Y=t(115),K=t.n(Y),Z=t(1030),X=t(460),Q=t.n(X),$=t(219),ee=t.n($),ae=t(137),te=t.n(ae),ne=t(458),re=t.n(ne),se=t(461),oe=t.n(se),ie=t(287),ce=t.n(ie).a.create({baseURL:"http://localhost:8000",timeout:3e4});ce.interceptors.request.use(function(e){return console.log(">>> Interceptor.req :",e),e}),ce.interceptors.response.use(function(e){return console.log(">>> Interceptor.resp: ",e),e});var le=ce;function ue(e){return le({url:"/api/token/verify/",method:"POST",data:{token:e}})}function pe(e){return le({url:"/api/getuser",method:"POST",headers:{Authorization:"Bearer "+e}})}function de(e,a){return le({url:"/api/updateuser",method:"POST",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+a},data:e})}function me(e,a){return le({url:"/api/updateavatar",method:"POST",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+a},data:e})}var ge=t(295),he=t.n(ge),fe="http://localhost:8000",ve="/",be="/login",Ee="/signup",Ce="/profile",Ie="/upload",ke="00000",ye={"00000":"Successful Request",99999:"Unexpected server error occurs","00001":"Some user input fields are invalid","00002":"Username or email are duplicated","00003":"User doesn't exist","00004":"User password is incorrect","00005":"User Id not found","00006":"User password must be greater than 8","00007":"Invalid email address","00011":"Image name or image descriptions are empty or unexpected upload error.","00012":"No images owned by that user.","00013":"Delete image fail unexpectedly."},Oe=function(e,a,t,n){return function(){var r=Object(F.a)(U.a.mark(function r(s){var o,i,c;return U.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=!1,i="99999",r.prev=2,r.next=5,le({url:"/api/signup",method:"POST",data:{username:e,password:a,email:t}});case 5:c=r.sent,console.log(">>> userSignup resp:",c),i=c.data.resp_code,o=i===ke,r.next=14;break;case 11:r.prev=11,r.t0=r.catch(2),console.error(">>> userSignup, error:",r.t0);case 14:o?(n.onSuccess(),s({lastRespMsg:i,type:"USER_SIGNUP_SUCCESS"})):(n.onFail(i),s({lastRespMsg:i,type:"USER_SIGNUP_FAIL"}));case 15:case"end":return r.stop()}},r,null,[[2,11]])}));return function(e){return r.apply(this,arguments)}}()},we=function(e,a,t){return function(){var n=Object(F.a)(U.a.mark(function n(r){var s,o,i,c,l,u,p,d;return U.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=!1,o="99999",i={},c={},n.prev=4,n.next=7,le({url:"/api/login",method:"POST",data:{username:e,password:a}});case 7:l=n.sent,console.log(">>> userLogin resp:",l),u=l.data,p=u.access,d=u.refresh,i=l.data,o=l.data.resp_code,localStorage.setItem("access",p),localStorage.setItem("refresh",d),c=he.a.decode(p),console.log(">>> userLogin decoded:",c),s=o===ke,n.next=22;break;case 19:n.prev=19,n.t0=n.catch(4),console.log(">>> userLogin, error:",n.t0);case 22:s?(t.onSuccess(),r({lastRespMsg:o,type:"USER_LOGIN_SUCCESS",userId:c.user_id,access:i.access,refresh:i.refresh,userDetail:{username:i.username,email:i.email,createdAt:i.date_joined,lastLoginAt:i.last_login},userProfile:{avatar:i.avatar,lastProfileEdit:i.last_edit,noOfPosts:i.no_of_posts,noOfImgs:i.no_of_imgs}})):(t.onFail(o),r({lastRespMsg:o,type:"USER_LOGIN_FAIL"}));case 23:case"end":return n.stop()}},n,null,[[4,19]])}));return function(e){return n.apply(this,arguments)}}()},Se=function(e,a){return function(){var t=Object(F.a)(U.a.mark(function t(n){var r,s,o,i,c,l,u;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=!1,s="",!e||!a){t.next=31;break}return t.prev=3,t.next=6,ue(e);case 6:o=t.sent,console.log(">>> verifyJWTToken accessResp:",o),r=!0,t.next=31;break;case 11:return t.prev=11,t.t0=t.catch(3),console.error(">>> verifyJWTToken access token invalid:",t.t0),t.prev=14,t.next=17,ue(a);case 17:return i=t.sent,console.log(">>> verifyJWTToken refreshResp: ",i),t.next=21,le({url:"/api/token/refresh/",method:"POST",data:{refresh:a}});case 21:c=t.sent,console.log(">>> refreshToken resp: ",c),s=c.data.access,localStorage.setItem("access",s),r=!0,t.next=31;break;case 28:t.prev=28,t.t1=t.catch(14),console.error(">>> verifyJWTToken refresh token invalid:",t.t1);case 31:r?(l=s||e,u=he.a.decode(l),console.log(">>> verifyJWTToken decode jwt:",u),n({lastRespMsg:"00000",type:"USER_VERIFY_TOKEN_SUCCESS",userId:u.user_id,access:l})):n({lastRespMsg:"99999",type:"USER_VERIFY_TOKEN_FAIL"});case 32:case"end":return t.stop()}},t,null,[[3,11],[14,28]])}));return function(e){return t.apply(this,arguments)}}()},Pe=function(e){return function(){var a=Object(F.a)(U.a.mark(function a(t){var n,r,s,o;return U.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=!1,r="99999",s={},a.prev=3,a.next=6,pe(e);case 6:o=a.sent,s=o.data,r=o.data.resp_code,console.log(">>> getAuthUser: ",o.data),n=r===ke,a.next=16;break;case 13:a.prev=13,a.t0=a.catch(3),console.error(">>> getAuthUser, error:",a.t0);case 16:t(n?{lastRespMsg:r,type:"GET_USER_SUCCESS",userDetail:{username:s.username,email:s.email,createdAt:s.date_joined,lastLoginAt:s.last_login},profile:{avatar:s.avatar,lastProfileEdit:s.last_edit,noOfImgs:s.no_of_imgs,activity:s.activity}}:{lastRespMsg:r,type:"GET_USER_FAIL"});case 17:case"end":return a.stop()}},a,null,[[3,13]])}));return function(e){return a.apply(this,arguments)}}()},Le=function(e,a,t){return function(){var n=Object(F.a)(U.a.mark(function n(r){var s,o,i;return U.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=!1,o="99999",{},n.prev=3,n.next=6,me(e,a);case 6:i=n.sent,o=i.data.resp_code,s=i.data.resp_code===ke,n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),console.log(">>> APIActions.updateAvatar.error:",n.t0);case 14:s?(t.onSuccess(),r({lastRespMsg:o,type:"UPDATE_AVATAR_SUCCESS"})):(t.onFail(o),r({lastRespMsg:o,type:"UPDATE_AVATAR_FAIL"}));case 15:case"end":return n.stop()}},n,null,[[3,11]])}));return function(e){return n.apply(this,arguments)}}()},xe=function(e,a,t){return function(){var n=Object(F.a)(U.a.mark(function n(r){var s,o,i;return U.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=!1,o="99999",{},n.prev=3,n.next=6,de(e,a);case 6:i=n.sent,o=i.data.resp_code,s=o===ke,n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),console.log(">>> APIActions.updateUser.error:",n.t0);case 14:s?(t.onSuccess(),r({lastRespMsg:o,type:"UPDATE_USER_SUCCESS"})):(t.onFail(o),r({lastRespMsg:o,type:"UPDATE_USER_FAIL"}));case 15:case"end":return n.stop()}},n,null,[[3,11]])}));return function(e){return n.apply(this,arguments)}}()},Re=function(){return function(){var e=Object(F.a)(U.a.mark(function e(a){var t;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le({url:"/api/logout",method:"GET"});case 2:t=e.sent,localStorage.clear(),a({lastRespMsg:t.data.resp_code,type:"USER_LOGOUT"});case 5:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}()},Ne=t(35),Ae=t(210),je=t(451),De=t(952),_e=t(229),Ue=t(1027),Fe=t(1004),Te=t(1031),Me=t(1003),Be=(t(688),function(e){function a(){return Object(c.a)(this,a),Object(u.a)(this,Object(p.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props,a=e.classes,t=e.isDrawerOpen,n=e.handleDrawerAction,r=e.isLogin,o=e.isLoading,i=e.userDetail,c=e.userDtlFetched;return r&&!o&&c?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"div-drawerCover "+(t?"":"div-hidden"),onClick:n}),s.a.createElement("div",{className:"div-sideDrawer-wrapper"},s.a.createElement(Ue.a,{className:a.drawer,variant:"persistent",anchor:"left",open:t,classes:{paper:a.drawerPaper}},s.a.createElement("div",{className:a.drawerHeader},s.a.createElement(Me.a,{className:a.avatar},i.username[0]),s.a.createElement("span",{className:"span-username"},i.username)),s.a.createElement(Fe.a,null),s.a.createElement(Te.a,null)))):null}}]),a}(s.a.Component)),Ge=Object(m.c)(function(e){return{userDtlFetched:e.userReducer.userDtlFetched,isLoading:e.uiReducer.isLoading,isLogin:e.userReducer.isLogin,userDetail:e.userReducer.userDetail}},function(e){return{}})(Object(De.a)(function(e){return{avatar:{},drawer:{width:240,flexShrink:0},drawerPaper:{width:240,zIndex:10011},drawerHeader:{display:"inline-flex",alignItems:"center",padding:"0 16px",minHeight:"64px",justifyContent:"flex-start",background:"#FFFFFF"}}})(Be)),ze=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(p.a)(a).call(this,e))).state={isMenuOpen:!1},t.handleMenuClose=t.handleMenuClose.bind(Object(T.a)(t)),t.redirect=t.redirect.bind(Object(T.a)(t)),t.logout=t.logout.bind(Object(T.a)(t)),t}return Object(d.a)(a,e),Object(l.a)(a,[{key:"handleMenuClose",value:function(){this.setState({isMenuOpen:!this.state.isMenuOpen})}},{key:"redirect",value:function(e){this.props.history.push(e)}},{key:"logout",value:function(){var e=Object(F.a)(U.a.mark(function e(){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.userLogout();case 2:this.redirect("");case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.props,t=a.classes,n=a.isDrawerOpen,r=a.handleDrawerAction,o=a.isLogin,i=(this.state.isMenuOpen,this.props.history.location.pathname,Object(Ae.a)({overrides:{MuiTooltip:{popper:{zIndex:"10002"},tooltip:{color:"#FFFFFF",background:"#0A0A0A"}}}}));return s.a.createElement("div",{className:"div-globalHeader-wrapper"},o&&s.a.createElement(Ge,{isDrawerOpen:n,handleDrawerAction:r}),s.a.createElement(je.a,{theme:i},s.a.createElement(M.a,{className:n?t.appBarShift:t.appBar},s.a.createElement(B.a,{className:t.toolbar},o&&!n&&s.a.createElement(G.a,{onClick:r,edge:"start",className:t.iconButtonMenu},s.a.createElement(H.a,null)),s.a.createElement("div",{className:"div-leftPartIcons"},s.a.createElement(G.a,{className:t.iconButton,onClick:function(){return e.redirect("")}},s.a.createElement(Z.a,{title:"Home",classes:t.tooltip},s.a.createElement(re.a,null)))),s.a.createElement(z.a,{className:"Typography-gallery "+t.globalHeaderTitle,variant:"h6",noWrap:!0},"Gallery"),s.a.createElement("div",{className:t.grow}),s.a.createElement("div",{className:t.searchBar},s.a.createElement("div",{className:t.searchIcon},s.a.createElement(J.a,null)),s.a.createElement(V.a,{placeholder:"Search...",classes:{root:t.inputRoot,input:t.inputInput}})),s.a.createElement("div",{className:"div-headerIcons"},s.a.createElement("div",{className:(o?"div-hidden ":"div-visitor ")+t.headerIcons},s.a.createElement(G.a,{className:t.iconButton,onClick:function(){return e.redirect("login")}},s.a.createElement(Z.a,{title:"Login",classes:t.tooltip},s.a.createElement(Q.a,null))),s.a.createElement(G.a,{className:t.iconButton,onClick:function(){return e.redirect("signup")}},s.a.createElement(Z.a,{title:"Sign up",classes:t.tooltip},s.a.createElement(ee.a,null)))),s.a.createElement("div",{className:(o?"div-member ":"div-hidden ")+t.headerIcons},s.a.createElement(G.a,{className:t.iconButton,onClick:function(){return e.redirect("upload")}},s.a.createElement(Z.a,{title:"Upload",classes:t.tooltip},s.a.createElement(te.a,null))),s.a.createElement(G.a,{className:t.iconButton,onClick:function(){return e.redirect("profile")}},s.a.createElement(Z.a,{title:"Profile",classes:t.tooltip},s.a.createElement(K.a,null))),s.a.createElement(G.a,{edge:"end",className:t.iconButton,onClick:this.logout},s.a.createElement(Z.a,{title:"Logout",classes:t.tooltip},s.a.createElement(oe.a,null)))))))))}}]),a}(s.a.Component),Ve=Object(_e.e)(Object(m.c)(function(e){return{isLogin:e.userReducer.isLogin}},function(e){return Object(f.b)({userLogout:Re},e)})(Object(De.a)(function(e){return{appBar:{zIndex:"9999",transition:"margin 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms,width 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms"},appBarShift:{zIndex:"9999",width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:"margin 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms,width 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms"},toolbar:{minHeight:"40px !important",background:"linear-gradient(to right, #DFDFDF, #EFEFEF)"},iconButtonMenu:{color:"#000000",marginRight:"20px"},globalHeaderTitle:{color:"#000000",marginRight:"20px"},searchBar:{"&:hover":{backgroundColor:Object(Ne.d)("#8F8F8F",.25)},position:"relative",borderRadius:"50px",backgroundColor:Object(Ne.d)("#8F8F8F",.15),marginLeft:20,width:"300px"},searchIcon:{width:"50px",height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",color:"#000000"},inputInput:{width:"100%",margin:"1px 1px 1px 40px",color:"#000000"},grow:{flexGrow:1},iconButton:{color:"#000000"}}})(ze))),We=(t(689),function(e){function a(){return Object(c.a)(this,a),Object(u.a)(this,Object(p.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"div-globalFooter-wrapper"})}}]),a}(s.a.Component)),He=t(299);function qe(){return{type:C}}function Je(){return{type:I}}t(690);var Ye=t(300),Ke=t(1019),Ze=t(1011),Xe=t(462),Qe=t.n(Xe),$e=t(1010),ea=t(103),aa=t.n(ea),ta=t(1009),na=t(49),ra=t(59),sa=t.n(ra),oa=t(161),ia=t.n(oa),ca=t(82),la=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(p.a)(a).call(this,e))).state={},t.capchaRef=null,t.onLoadRecaptcha=t.onLoadRecaptcha.bind(Object(T.a)(t)),t.verifyCallback=t.verifyCallback.bind(Object(T.a)(t)),t.onFormSubmit=t.onFormSubmit.bind(Object(T.a)(t)),t.onFormValidate=t.onFormValidate.bind(Object(T.a)(t)),t.redirect=t.redirect.bind(Object(T.a)(t)),t.handleSnackBar=t.handleSnackBar.bind(Object(T.a)(t)),t}return Object(d.a)(a,e),Object(l.a)(a,[{key:"redirect",value:function(e){this.props.history.push(e)}},{key:"handleSnackBar",value:function(e,a){this.props.enqueueSnackbar(e,{variant:a})}},{key:"componentDidMount",value:function(){this.capchaRef&&this.capchaRef.reset()}},{key:"onLoadRecaptcha",value:function(){this.capchaRef&&this.capchaRef.reset()}},{key:"verifyCallback",value:function(e){console.log(e,"<= your recaptcha token")}},{key:"onFormSubmit",value:function(){var e=Object(F.a)(U.a.mark(function e(a){var t,n,r=this;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(">>> onFormSubmit, formVals: ",a),{},t=a.username,n=a.password,console.log(ye[this.props.lastRespMsg]),this.props.startLoading(),e.next=7,this.props.userLogin(t,n,{onSuccess:function(){return r.handleSnackBar("Login successfully.","success")},onFail:function(e){return r.handleSnackBar(ye[e],"error")}});case 7:this.props.stopLoading();case 8:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.props.isLogin&&this.props.userDtlFetched&&(console.log("Login page component componentDidUpdate redirect to home page"),this.redirect(""))}},{key:"onFormValidate",value:function(e){console.log("onFormValidate: ",e);var a={};return sa()(["username","password"],function(t){e[t]||(a[t]="Required field")}),a}},{key:"render",value:function(){var e=this,a=this.props.classes;return s.a.createElement("div",{className:"div-loginPage-wrapper"},s.a.createElement(na.b,{onSubmit:this.onFormSubmit,validate:this.onFormValidate,render:function(t){var n=t.handleSubmit,r=t.submitting;return s.a.createElement("form",{className:"form-loginPage",onSubmit:n},s.a.createElement(Ye.a,{className:a.loginPaper},s.a.createElement(ta.a,{container:!0},s.a.createElement(ta.a,{item:!0,xs:12,className:a.loginLabel},s.a.createElement(Qe.a,{className:a.loginLabelIcon})),s.a.createElement(ta.a,{item:!0,xs:12},s.a.createElement(na.a,{fullWidth:!0,required:!0,name:"username",type:"text",render:function(e){var t=e.input,n=e.meta;return s.a.createElement("div",null,s.a.createElement(Ke.a,{label:"Username",onChange:t.onChange,className:a.textField,margin:"normal",error:n.submitFailed&&!!n.error,variant:"outlined",InputProps:{startAdornment:s.a.createElement($e.a,{position:"start"},s.a.createElement(K.a,null))}}),s.a.createElement("span",{className:"span-metaError"},n.dirty?n.submitError:n.modified?n.error:""))}})),s.a.createElement(ta.a,{item:!0,xs:12},s.a.createElement(na.a,{fullWidth:!0,required:!0,name:"password",render:function(e){var t=e.input,n=e.meta;return s.a.createElement("div",null,s.a.createElement(Ke.a,{label:"Password",type:"password",onChange:t.onChange,className:a.textField,margin:"normal",error:n.submitFailed&&!!n.error,variant:"outlined",InputProps:{startAdornment:s.a.createElement($e.a,{position:"start"},s.a.createElement(aa.a,null))}}),s.a.createElement("span",{className:"span-metaError"},n.dirty?n.submitError:n.modified?n.error:""))}})),s.a.createElement(ta.a,{item:!0,xs:12,className:"div-recaptcha-container"},s.a.createElement("div",{className:"div-reCaptcha-innerContainer"},s.a.createElement(h.ReCaptcha,{ref:function(a){e.capchaRef=a},size:"normal","data-theme":"dark",render:"explicit",sitekey:"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI",onloadCallback:e.onLoadRecaptcha,verifyCallback:e.verifyCallback}))),s.a.createElement(ta.a,{item:!0,xs:12},s.a.createElement(Ze.a,{className:a.loginButton,variant:"contained",color:"primary",type:"submit",disabled:r},"Login")))))}}))}}]),a}(s.a.Component),ua=Object(_e.e)(Object(m.c)(function(e){return{userDtlFetched:e.userReducer.userDtlFetched,access:e.userReducer.access,lastRespMsg:e.userReducer.lastRespMsg,isLogin:e.userReducer.isLogin}},function(e){return Object(f.b)({userLogin:we,startLoading:qe,stopLoading:Je},e)})(Object(De.a)(function(){return{loginPaper:{padding:"30px",marginBottom:"30px"},loginLabel:{fontSize:"26px",fontWeight:"600",textAlign:"center",padding:"30px",background:"#a9a9a9"},loginLabelIcon:{width:"80px",height:"80px"},textField:{width:"100%",margin:"15px auto"},loginButton:{width:"100%",margin:"15px auto",padding:"10px",fontSize:"16px"}}})(Object(ca.withSnackbar)(la)))),pa=(t(711),t(220)),da=t.n(pa);function ma(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}var ga=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(p.a)(a).call(this,e))).state={},t.capchaRef=null,t.onLoadRecaptcha=t.onLoadRecaptcha.bind(Object(T.a)(t)),t.verifyCallback=t.verifyCallback.bind(Object(T.a)(t)),t.onFormSubmit=t.onFormSubmit.bind(Object(T.a)(t)),t.onFormValidate=t.onFormValidate.bind(Object(T.a)(t)),t.redirect=t.redirect.bind(Object(T.a)(t)),t}return Object(d.a)(a,e),Object(l.a)(a,[{key:"redirect",value:function(e){this.props.history.push(e)}},{key:"handleSnackBar",value:function(e,a){this.props.enqueueSnackbar(e,{variant:a})}},{key:"componentDidMount",value:function(){this.capchaRef&&this.capchaRef.reset()}},{key:"onLoadRecaptcha",value:function(){this.capchaRef&&this.capchaRef.reset()}},{key:"verifyCallback",value:function(e){console.log(e,"<= your recaptcha token")}},{key:"onFormSubmit",value:function(){var e=Object(F.a)(U.a.mark(function e(a){var t,n,r,s,o,i=this;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(">>> onFormSubmit: ",a),t={},n=a.password,r=a.confirmPassword,s=a.email,o=a.username,n!=r&&(t.password="Password and Confirm Password field don't match."),n.length<8&&(t.password="Password length must be greater than 8."),ma(s)||(t.email="Not a valid email."),ia()(t)){e.next=8;break}return e.abrupt("return",t);case 8:return this.props.startLoading(),e.next=11,this.props.userSignup(o,n,s,{onSuccess:function(){return i.handleSnackBar("Sign up successfully.","success")},onFail:function(e){return i.handleSnackBar(ye[e],"error")}});case 11:this.props.stopLoading(),this.props.lastRespMsg===ke&&this.redirect("");case 13:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}()},{key:"onFormValidate",value:function(e){console.log("onFormValidate: ",e);var a={};return sa()(["username","email","password","confirmPassword"],function(t){e[t]||(a[t]="Required field")}),a}},{key:"componentDidUpdate",value:function(){this.props.isLogin&&this.redirect("")}},{key:"render",value:function(){var e=this,a=this.props,t=a.classes;a.lastRespMsg;return s.a.createElement("div",{className:"div-signupPage-wrapper"},s.a.createElement(na.b,{onSubmit:this.onFormSubmit,validate:this.onFormValidate,render:function(a){var n=a.handleSubmit;a.submitting,a.pristine;return s.a.createElement("form",{className:"form-signupPage",onSubmit:n},s.a.createElement(Ye.a,{className:t.signupPaper},s.a.createElement(ta.a,{container:!0},s.a.createElement(ta.a,{item:!0,xs:12,className:t.signupLabel},s.a.createElement(ee.a,{className:t.signupLabelIcon})),s.a.createElement(ta.a,{item:!0,xs:12},s.a.createElement(na.a,{fullWidth:!0,required:!0,name:"username",type:"text",render:function(e){var a=e.input,n=e.meta;return s.a.createElement("div",null,s.a.createElement(Ke.a,{label:"Username",onChange:a.onChange,className:t.textField,margin:"normal",error:n.submitFailed&&!!n.error,variant:"outlined",InputProps:{startAdornment:s.a.createElement($e.a,{position:"start"},s.a.createElement(K.a,null))}}),s.a.createElement("span",{className:"span-metaError"},n.dirty?n.submitError:n.modified?n.error:""))}})),s.a.createElement(ta.a,{item:!0,xs:12},s.a.createElement(na.a,{fullWidth:!0,required:!0,name:"email",type:"email",render:function(e){var a=e.input,n=e.meta;return s.a.createElement("div",null,s.a.createElement(Ke.a,{label:"Email",onChange:a.onChange,className:t.textField,margin:"normal",error:n.submitFailed&&!!n.error,variant:"outlined",InputProps:{startAdornment:s.a.createElement($e.a,{position:"start"},s.a.createElement(da.a,null))}}),s.a.createElement("span",{className:"span-metaError"},n.dirty?n.submitError:n.modified?n.error:""))}})),s.a.createElement(ta.a,{item:!0,xs:12},s.a.createElement(na.a,{fullWidth:!0,required:!0,name:"password",render:function(e){var a=e.input,n=e.meta;return s.a.createElement("div",null,s.a.createElement(Ke.a,{label:"Password",type:"password",onChange:a.onChange,variant:"outlined",className:t.textField,margin:"normal",error:n.submitFailed&&!!n.error,InputProps:{startAdornment:s.a.createElement($e.a,{position:"start"},s.a.createElement(aa.a,null))}}),s.a.createElement("span",{className:"span-metaError"},n.dirty?n.submitError:n.modified?n.error:""))}})),s.a.createElement(ta.a,{item:!0,xs:12},s.a.createElement(na.a,{fullWidth:!0,required:!0,name:"confirmPassword",render:function(e){var a=e.input,n=e.meta;return s.a.createElement("div",null,s.a.createElement(Ke.a,{label:"Confirm Password",type:"password",onChange:a.onChange,variant:"outlined",className:t.textField,margin:"normal",error:n.submitFailed&&!!n.error,InputProps:{startAdornment:s.a.createElement($e.a,{position:"start"},s.a.createElement(aa.a,null))}}),s.a.createElement("span",{className:"span-metaError"},n.dirty?n.submitError:n.modified?n.error:""))}})),s.a.createElement(ta.a,{item:!0,xs:8},s.a.createElement("div",{className:"div-reCaptcha-container"},s.a.createElement(h.ReCaptcha,{ref:function(a){e.capchaRef=a},size:"normal","data-theme":"dark",render:"explicit",sitekey:"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI",onloadCallback:e.onLoadRecaptcha,verifyCallback:e.verifyCallback}))),s.a.createElement(ta.a,{item:!0,xs:4},s.a.createElement(Ze.a,{className:t.signupButton,variant:"contained",color:"primary",type:"submit"},"Sign up")))))}}))}}]),a}(s.a.Component),ha=Object(_e.e)(Object(m.c)(function(e){return{isLogin:e.userReducer.isLogin,lastRespMsg:e.userReducer.lastRespMsg}},function(e){return Object(f.b)({userSignup:Oe,startLoading:qe,stopLoading:Je},e)})(Object(De.a)(function(){return{signupPaper:{padding:"30px",marginBottom:"30px"},signupLabel:{fontSize:"26px",fontWeight:"600",textAlign:"center",padding:"30px",background:"#a9a9a9"},signupLabelIcon:{width:"80px",height:"80px"},textField:{width:"100%",margin:"15px auto"},signupButton:{width:"100%",margin:"15px auto",padding:"10px",fontSize:"16px"}}})(Object(ca.withSnackbar)(ga)))),fa=(t(712),t(1012)),va=t(1014),ba=t(138),Ea=t.n(ba),Ca=t(1013),Ia=t(230),ka=t.n(Ia),ya=t(1020),Oa=t(488),wa=t(951),Sa=t(165),Pa=t(121),La=t(1026),xa=t(1015),Ra=t(1024),Na=t(1021),Aa=t(1016),ja=t(167),Da=t(228);function _a(e,a){return le({url:"/api/upsert",method:"POST",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+a},data:e})}function Ua(e,a,t,n){var r="/api/getimage/?",s="";if(e&&(r+=s+"userId=".concat(e),s="&"),a&&(r+=s+"page=".concat(a),s="&"),t&&(r+=s+"imgPerPage=".concat(t),s="&"),n){var o="";sa()(n,function(e,a){o+=s+"tags=".concat(e)}),r+=o}return le({url:r,method:"GET"})}var Fa=function(e,a){return function(){var t=Object(F.a)(U.a.mark(function t(n){var r,s,o;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r="99999",s=!1,t.prev=2,t.next=5,_a(e,a);case 5:o=t.sent,r=o.data.resp_code,s=r===ke,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(">>> APIActions.upsertImage.error:",t.t0);case 13:n(s?{lastRespMsg:r,type:"API_UPLOAD_SUCCESS"}:{lastRespMsg:r,type:"API_UPLOAD_FAIL"});case 14:case"end":return t.stop()}},t,null,[[2,10]])}));return function(e){return t.apply(this,arguments)}}()},Ta=function(e,a,t,n){return function(){var r=Object(F.a)(U.a.mark(function r(s){var o,i,c,l;return U.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o="99999",i=!1,c={},r.prev=3,console.log(">>> APIActions.getImages: userId:".concat(e,", currPage:").concat(a)),r.next=7,Ua(e,a,t,n);case 7:l=r.sent,o=l.data.resp_code,c=l.data,i=o===ke,r.next=16;break;case 13:r.prev=13,r.t0=r.catch(3),console.log(">>> APIActions.getImages.error:",r.t0);case 16:s(i?{lastRespMsg:o,type:"API_GET_IMAGE_SUCCESS",data:c.data,imgCount:c.img_count,numPages:c.num_pages,currPage:c.curr_page}:{lastRespMsg:o,type:"API_GET_IMAGE_FAIL"});case 17:case"end":return r.stop()}},r,null,[[3,13]])}));return function(e){return r.apply(this,arguments)}}()},Ma=function(){return function(){var e=Object(F.a)(U.a.mark(function e(a){var t,n,r,s;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="99999",n=!1,r={},e.prev=3,console.log(">>> APIActions.getTags"),e.next=7,le({url:"/api/gettags",method:"GET"});case 7:s=e.sent,t=s.data.resp_code,r=s.data,n=t===ke,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(">>> APIActions.getTags.error:",e.t0);case 16:a(n?{lastRespMsg:t,type:"API_GET_TAGS_SUCCESS",tags:r.tags}:{lastRespMsg:t,type:"API_GET_TAGS_FAIL"});case 17:case"end":return e.stop()}},e,null,[[3,13]])}));return function(a){return e.apply(this,arguments)}}()},Ba=t(84),Ga=t.n(Ba),za=t(288),Va=t.n(za),Wa=t(464),Ha=t.n(Wa),qa=t(465),Ja=t.n(qa),Ya=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(p.a)(a).call(this,e))).state={currPage:1,imgPerPage:"6",rightCardTab:"userActivity",avatarFile:null,updatedAvatar:null,profileUpdateOpen:!1,avatarUpdateOpen:!1,imgUpdateOpen:!1,currImgId:-1,currImgSrc:"",currImgName:"",currImgDesc:"",currImgCreatedAt:"",currTags:[]},t.onDrop=t.onDrop.bind(Object(T.a)(t)),t.redirect=t.redirect.bind(Object(T.a)(t)),t.onUpdateProfile=t.onUpdateProfile.bind(Object(T.a)(t)),t.onUpdateAvatar=t.onUpdateAvatar.bind(Object(T.a)(t)),t.onFormValidate=t.onFormValidate.bind(Object(T.a)(t)),t.handleModalClose=t.handleModalClose.bind(Object(T.a)(t)),t.handleModalOpen=t.handleModalOpen.bind(Object(T.a)(t)),t.onPageChange=t.onPageChange.bind(Object(T.a)(t)),t.onInputChange=t.onInputChange.bind(Object(T.a)(t)),t.onDropdownChange=t.onDropdownChange.bind(Object(T.a)(t)),t.onClickUpdateImage=t.onClickUpdateImage.bind(Object(T.a)(t)),t.changeRightTabContent=t.changeRightTabContent.bind(Object(T.a)(t)),t}return Object(d.a)(a,e),Object(l.a)(a,[{key:"redirect",value:function(e){this.props.history.push(e)}},{key:"componentDidMount",value:function(){var e=Object(F.a)(U.a.mark(function e(){var a,t,n,r,s,o;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.startLoading(),a=localStorage.getItem("access"),t=localStorage.getItem("refresh"),e.next=5,this.props.verifyJWTToken(a,t);case 5:if(n=!0,this.props.lastRespMsg!==ke){e.next=15;break}return e.next=9,this.props.getAuthUser(a);case 9:if(this.props.lastRespMsg!==ke){e.next=15;break}return r=this.state,s=r.currPage,o=r.imgPerPage,n=!1,e.next=14,this.props.getImages(this.props.userId,s,o);case 14:this.props.stopLoading();case 15:if(!n){e.next=19;break}return e.next=18,this.props.userLogout();case 18:this.props.stopLoading();case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onClickUpdateImage",value:function(){var e=Object(F.a)(U.a.mark(function e(a){var t,n,r,s,o,i,c,l,u;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new FormData,n=this.state,r=n.currImgId,s=n.currTags,o=n.currImgName,i=n.currImgDesc,c=n.currImgCreatedAt,l=n.currPage,u=n.imgPerPage,this.props.tags){e.next=5;break}return e.next=5,this.props.getTags();case 5:return console.log("img_id:",r),t.append("img_id",r),t.append("created_at",new Date(c).getTime()),this.props.startLoading(),"Update"===a?(t.append("image_name",o),t.append("image_desc",i),sa()(s,function(e,a){t.append("tags",e)}),t.append("api_type","update")):t.append("api_type","delete"),e.next=12,this.props.upsertImage(t,this.props.access);case 12:if(this.props.lastRespMsg!==ke){e.next=22;break}return this.handleSnackBar("".concat(a," the selected image successfully."),"success"),e.next=16,this.props.getImages(this.props.userId,l,u);case 16:if(this.handleModalClose("uploadedImgs"),"Delete"!==a){e.next=20;break}return e.next=20,this.props.getAuthUser(this.props.access);case 20:e.next=23;break;case 22:this.handleSnackBar(ye[this.props.lastRespMsg],"error");case 23:this.props.stopLoading();case 24:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}()},{key:"onInputChange",value:function(e,a){console.log(">>> onInputChange, e.target.value:",e.target.value);var t={};t["imgName"==a?"currImgName":"currImgDesc"]=e.target.value,this.setState(t)}},{key:"onDropdownChange",value:function(e,a){console.log(">>> onDropdownChange, data.name: ".concat(a.name,", data.value: ").concat(a.value));this.state.currTags;this.setState({currTags:a.value})}},{key:"handleModalClose",value:function(e){console.log(">>> handleModalClose");var a="profile"==e?{profileUpdateOpen:!1}:"avatar"==e?{avatarUpdateOpen:!1}:{imgUpdateOpen:!1};this.setState(a)}},{key:"handleModalOpen",value:function(e,a,t){console.log(">>> handleModalOpen");var n="profile"==e?{profileUpdateOpen:!0}:"avatar"==e?{avatarUpdateOpen:!0}:{imgUpdateOpen:!0};a&&(n.currImgSrc=a),t&&(n.currImgId=t.id,n.currImgName=t.image_name,n.currImgDesc=t.image_desc,n.currImgCreatedAt=t.created_at,n.currTags=t.tags),this.setState(n)}},{key:"handleSnackBar",value:function(e,a){this.props.enqueueSnackbar(e,{variant:a})}},{key:"onUpdateAvatar",value:function(){var e=Object(F.a)(U.a.mark(function e(){var a,t=this;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(">>> onUpdateAvatar. this.state.avatarFile: ",this.state.avatarFile),this.state.avatarFile){e.next=5;break}this.handleSnackBar("No image avatar file is uploaded.","error"),e.next=15;break;case 5:return this.props.startLoading(),(a=new FormData).append("avatar",this.state.avatarFile),e.next=10,this.props.updateAvatar(a,this.props.access,{onSuccess:function(){return t.handleSnackBar("Update avatar successfully.","success")},onFail:function(e){return t.handleSnackBar(ye[e],"error")}});case 10:if(this.props.lastRespMsg!==ke){e.next=14;break}return e.next=13,this.props.getAuthUser(this.props.access);case 13:this.handleModalClose("avatar");case 14:this.props.stopLoading();case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onUpdateProfile",value:function(){var e=Object(F.a)(U.a.mark(function e(a){var t,n,r,s,o,i=this;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(">>> onUpdateProfile.formVals:",a),t={},n=a.password,r=a.retypePassword,s=a.email,n!=r&&(t.password="Password and Retype Password field don't match."),n.length<8&&(t.password="Password length must be greater than 8."),ma(s)||(t.email="Not a valid email."),ia()(t)){e.next=8;break}return e.abrupt("return",t);case 8:return this.props.startLoading(),(o=new FormData).append("email",s),o.append("password",n),e.next=14,this.props.updateUser(o,this.props.access,{onSuccess:function(){return i.handleSnackBar("Update user successfully.","success")},onFail:function(e){return i.handleSnackBar(ye[e],"error")}});case 14:if(this.props.lastRespMsg!==ke){e.next=18;break}return e.next=17,this.props.getAuthUser(this.props.access);case 17:this.handleModalClose("profile");case 18:this.props.stopLoading();case 19:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}()},{key:"onFormValidate",value:function(e){console.log(">>> onFormValidate: ",e);var a={};return sa()(["email","password","retypePassword"],function(t){e[t]||(a[t]="Required field")}),a}},{key:"onDrop",value:function(e){var a=this;console.log(">>> onDrop.file:",e[0]);var t=new FileReader;t.onabort=function(){return console.log("file reading was aborted")},t.onerror=function(){return console.log("file reading has failed")},t.onload=function(){a.setState({avatarFile:e[0],updatedAvatar:t.result})},t.readAsDataURL(e[0])}},{key:"changeRightTabContent",value:function(e){this.setState({rightCardTab:e})}},{key:"onPageChange",value:function(){var e=Object(F.a)(U.a.mark(function e(a,t){var n,r;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(">>> ProfilePage.onPageChange.props:",t,this.props),n=this.props,n.userId,n.lastRespMsg,r=this.state.imgPerPage,qe(),e.next=6,this.props.getImages(-1,t.activePage,r);case 6:Je();case 7:case"end":return e.stop()}},e,this)}));return function(a,t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.props,t=a.userDetail,n=a.userProfile,r=(a.isLogin,a.classes),o=a.userId,i=a.userDtlFetched,c=a.data,l=(a.imgCount,a.numPages),u=a.tags,p=this.state,d=p.updatedAvatar,m=p.profileUpdateOpen,g=p.avatarUpdateOpen,h=p.imgUpdateOpen,f=p.rightCardTab,v=p.currImgSrc,b=p.currImgName,E=p.currImgDesc,C=p.currTags,I=new Date,k=(new Date).setDate(I.getDate()-120),y=new Array(120);sa()(n.activity,function(e,a){var t=I.getDate()-new Date(e[0]).getDate();y[t]={date:new Date(e[0]),count:e[1]}}),sa()(Va()(120),function(e,a){y[a]||(y[a]={date:(new Date).setDate(I.getDate()-e),count:0})});var O=Ga()(u,function(e,a){return{key:e,text:e,value:a+1}});return s.a.createElement("div",{className:"div-profilePage-wrapper"},s.a.createElement(fa.a,{className:r.leftCard},i?s.a.createElement("div",{className:"div-leftCard-area"},s.a.createElement(Ca.a,null,s.a.createElement(ya.a,{className:"Modal-updateAvatar",open:g,onClose:function(){return e.handleModalClose("avatar")},trigger:s.a.createElement(Oa.a,{onClick:function(){return e.handleModalOpen("avatar")},src:fe+n.avatar,wrapped:!0,className:"Image-profileAvatar"})},s.a.createElement(ya.a.Header,null,"Profile Picture"),s.a.createElement(ya.a.Content,{image:!0},s.a.createElement(Oa.a,{size:"medium",src:d||fe+n.avatar,wrapped:!0}),s.a.createElement(ya.a.Description,null,s.a.createElement(fa.a,{className:r.updateAvatarArea},s.a.createElement(Ca.a,{className:r.updateAvatarArea},s.a.createElement(Da.a,{multiple:!1,onDrop:this.onDrop},function(e){var a=e.getRootProps,t=e.getInputProps;return s.a.createElement("section",null,s.a.createElement("div",a(),s.a.createElement("input",t()),s.a.createElement("span",{className:"span-drapdropText"},s.a.createElement(te.a,null),"Drag and drop image here, or click to select image to upload.")))}))))),s.a.createElement(wa.a,{className:"Button-updateAvatar",onClick:this.onUpdateAvatar},"Change"))),s.a.createElement(va.a,{className:r.leftCardContent},s.a.createElement(Sa.a,{className:"Label-profile"},s.a.createElement(Pa.a,{name:"user"}),"Username: ",t.username),s.a.createElement(Sa.a,{className:"Label-profile"},s.a.createElement(Pa.a,{name:"info"}),"User ID: ",o),s.a.createElement(Sa.a,{className:"Label-profile"},s.a.createElement(Pa.a,{name:"mail"}),"Email: ",t.email),s.a.createElement(Sa.a,{className:"Label-profile"},s.a.createElement(Pa.a,{name:"add to calendar"}),"Joined In: ",ka()(new Date(t.createdAt)).format("MM-DD-YYYY")),s.a.createElement(Sa.a,{className:"Label-profile"},s.a.createElement(Pa.a,{name:"sign-in"}),"Last Login: ",ka()(new Date(t.lastLoginAt)).format("MM-DD-YYYY HH:mm A")),s.a.createElement(Sa.a,{className:"Label-profile"},s.a.createElement(Pa.a,{name:"undo"}),"Last Update: ",n.lastProfileEdit?ka()(new Date(n.lastProfileEdit)).format("MM-DD-YYYY HH:mm A"):"N/A"),s.a.createElement(Sa.a,{className:"Label-profile"},s.a.createElement(Pa.a,{name:"image"}),"Images: ",n.noOfImgs)),s.a.createElement(na.b,{onSubmit:this.onUpdateProfile,validate:this.onFormValidate,render:function(a){var t=a.handleSubmit;a.submitting,a.pristine;return s.a.createElement(ya.a,{className:"Modal-updateProfile",open:m,onClose:function(){return e.handleModalClose("profile")},trigger:s.a.createElement(wa.a,{onClick:function(){return e.handleModalOpen("profile")},className:"Button-updateProfile"},"Update Profile")},s.a.createElement(ya.a.Header,null,"Update Profile"),s.a.createElement(ya.a.Content,{image:!0},s.a.createElement(ya.a.Description,null,s.a.createElement("form",{className:"form-updateUser",onSubmit:t},s.a.createElement(La.a,null,s.a.createElement(na.a,{fullWidth:!0,required:!0,name:"email",type:"text",render:function(e){var a=e.input,t=e.meta;return s.a.createElement("div",{className:"div-inlineGrid"},s.a.createElement(Ke.a,{label:"Email",onChange:a.onChange,className:r.textField,margin:"normal",error:t.submitFailed&&!!t.error,variant:"outlined",InputProps:{startAdornment:s.a.createElement($e.a,{position:"start"},s.a.createElement(da.a,null))}}),s.a.createElement("span",{className:"span-metaError"},t.dirty?t.submitError:t.modified?t.error:""))}})),s.a.createElement(La.a,null,s.a.createElement(na.a,{fullWidth:!0,required:!0,name:"password",render:function(e){var a=e.input,t=e.meta;return s.a.createElement("div",{className:"div-inlineGrid"},s.a.createElement(Ke.a,{type:"password",label:"Password",onChange:a.onChange,className:r.textField,margin:"normal",error:t.submitFailed&&!!t.error,variant:"outlined",InputProps:{startAdornment:s.a.createElement($e.a,{position:"start"},s.a.createElement(aa.a,null))}}),s.a.createElement("span",{className:"span-metaError"},t.dirty?t.submitError:t.modified?t.error:""))}})),s.a.createElement(La.a,null,s.a.createElement(na.a,{fullWidth:!0,required:!0,name:"retypePassword",render:function(e){var a=e.input,t=e.meta;return s.a.createElement("div",{className:"div-inlineGrid"},s.a.createElement(Ke.a,{label:"Retype Password",type:"password",onChange:a.onChange,className:r.textField,margin:"normal",error:t.submitFailed&&!!t.error,variant:"outlined",InputProps:{startAdornment:s.a.createElement($e.a,{position:"start"},s.a.createElement(aa.a,null))}}),s.a.createElement("span",{className:"span-metaError"},t.dirty?t.submitError:t.modified?t.error:""))}})),s.a.createElement(wa.a,{className:"Button-updateSubmit",type:"submit"},"Update")))))}})):s.a.createElement(Ea.a,{className:"Loader-profile",type:"line-scale-pulse-out-rapid",color:"#000000",active:!0})),s.a.createElement(fa.a,{className:r.rightCard},s.a.createElement(wa.a.Group,{labeled:!0,icon:!0,className:"ButtonGroup-profile"},s.a.createElement(wa.a,{onClick:function(){return e.changeRightTabContent("userActivity")},icon:"braille",active:"userActivity"==f,content:"User Activity"}),s.a.createElement(wa.a,{onClick:function(){return e.changeRightTabContent("uploadedImgs")},icon:"images outline",active:"uploadedImgs"==f,content:"Uploaded Images"})),"uploadedImgs"==f?s.a.createElement(s.a.Fragment,null,s.a.createElement(xa.a,{horizontal:!0},s.a.createElement(Ra.a,{as:"h4"},s.a.createElement(Pa.a,{name:"images outline"}),"Uploaded Images")),s.a.createElement("div",{className:"div-uploadedImgs-wrapper"},s.a.createElement(Na.a,{className:"Pagination-uploadedImgs",defaultActivePage:1,ellipsisItem:{content:s.a.createElement(Pa.a,{name:"ellipsis horizontal"}),icon:!0},firstItem:{content:s.a.createElement(Pa.a,{name:"angle double left"}),icon:!0},lastItem:{content:s.a.createElement(Pa.a,{name:"angle double right"}),icon:!0},prevItem:{content:s.a.createElement(Pa.a,{name:"angle left"}),icon:!0},nextItem:{content:s.a.createElement(Pa.a,{name:"angle right"}),icon:!0},onPageChange:this.onPageChange,totalPages:l}),0==c.length?s.a.createElement("div",{className:"div-noImage-placeholder"},s.a.createElement("span",{className:"span-noImages"},s.a.createElement(Pa.a,{name:"images"})," No Images")):s.a.createElement(fa.a,{className:"Card-imgs"},s.a.createElement(La.a,{columns:3,className:"Grid-img-wrapper"},Ga()(c,function(a,t){var n=fe+a.image_file;return s.a.createElement(La.a.Column,{key:"GridCol-"+t,onClick:function(){return e.handleModalOpen("uploadedImgs",n,a)}},s.a.createElement(fa.a,{className:"Card-img"},s.a.createElement(Oa.a,{className:"Image-uploadedImgs",src:n})))}))))):s.a.createElement(s.a.Fragment,null,s.a.createElement(xa.a,{horizontal:!0},s.a.createElement(Ra.a,{as:"h4"},s.a.createElement(Pa.a,{name:"braille"}),"User Activity")),s.a.createElement("div",{className:"div-calendarHeatmap-wrapper"},s.a.createElement(Ha.a,{startDate:k,endDate:I,values:y,classForValue:function(e){return 0==e.count?"color-heatmap-0":e.count<=4&&e.count>0?"color-heatmap-1":e.count<=8&&e.count>4?"color-heatmap-2":e.count<=12&&e.count>8?"color-heatmap-3":e.count<=16&&e.count>12?"color-heatmap-4":e.count>16?"color-heatmap-5":void 0},showWeekdayLabels:!0,gutterSize:4,tooltipDataAttrs:function(e){var a=new Date(e.date);return{"data-tip":"".concat(a.toGMTString().split(", ")[1].slice(0,11))+"<br/> Uploaded Images: ".concat(e.count)}}}),s.a.createElement(Ja.a,{multiline:!0})))),s.a.createElement(ya.a,{className:"Modal-updateImage",open:h,onClose:function(){return e.handleModalClose("uploadedImgs")}},s.a.createElement(ya.a.Header,null,"Update Image"),s.a.createElement(ya.a.Content,{image:!0},s.a.createElement(Oa.a,{wrapped:!0,size:"medium",src:v}),s.a.createElement("div",{className:"div-updateImage-wrapper"},s.a.createElement(Aa.a,{icon:"list",iconPosition:"left",placeholder:"Image name",className:"Input-imgName",value:b,onChange:function(a){return e.onInputChange(a,"imgName")}}),s.a.createElement(Aa.a,{icon:"newspaper outline",iconPosition:"left",placeholder:"Image description",className:"Input-imgDesc",value:E,onChange:function(a){return e.onInputChange(a,"imgDesc")}}),s.a.createElement(ja.a,{className:"Dropdown-tags",placeholder:"Tags",value:C,onChange:this.onDropdownChange,renderLabel:function(e){return{color:"blue",icon:"tag",content:e.text}},multiple:!0,search:!0,selection:!0,options:O}))),s.a.createElement("div",{className:"div-deleteUpdateImageButton-wrapper"},s.a.createElement(wa.a,{onClick:function(){return e.onClickUpdateImage("Delete")},className:"Button-deleteImage"},"Delete"),s.a.createElement(wa.a,{onClick:function(){return e.onClickUpdateImage("Update")},className:"Button-updateImage"},"Update"))))}}]),a}(s.a.Component),Ka=Object(_e.e)(Object(m.c)(function(e){return{lastRespMsg:e.userReducer.lastRespMsg,access:e.userReducer.access,isLogin:e.userReducer.isLogin,userId:e.userReducer.userId,userDetail:e.userReducer.userDetail,userProfile:e.userReducer.userProfile,userDtlFetched:e.userReducer.userDtlFetched,data:e.apiReducer.data,imgCount:e.apiReducer.imgCount,numPages:e.apiReducer.numPages,tags:e.apiReducer.tags}},function(e){return Object(f.b)({getAuthUser:Pe,userLogout:Re,upsertImage:Fa,getImages:Ta,updateAvatar:Le,getTags:Ma,verifyJWTToken:Se,startLoading:qe,stopLoading:Je,updateUser:xe},e)})(Object(De.a)(function(e){return{leftCard:{width:"300px",minHeight:"500px"},leftCardContent:{paddingLeft:"0px"},updateAvatarArea:{height:"100%"},rightCard:{width:"600px",minHeight:"550px",marginLeft:"20px"}}})(Object(ca.withSnackbar)(Ya)))),Za=(t(943),t(944),function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(p.a)(a).call(this,e))).state={files:[],imgNames:null,imgDescs:null,tags:null,modifiedTags:[]},t.onDrop=t.onDrop.bind(Object(T.a)(t)),t.onFormSubmit=t.onFormSubmit.bind(Object(T.a)(t)),t.onInputChange=t.onInputChange.bind(Object(T.a)(t)),t.onDropdownChange=t.onDropdownChange.bind(Object(T.a)(t)),t}return Object(d.a)(a,e),Object(l.a)(a,[{key:"handleSnackBar",value:function(e,a){this.props.enqueueSnackbar(e,{variant:a})}},{key:"onDrop",value:function(e){var a=this;console.log(">>> onDrop.acceptedFiles:",e);var t=[],n=[];sa()(e,function(r,s){r.target;var o=new FileReader;o.onabort=function(){return console.log("file reading was aborted")},o.onerror=function(){return console.log("file reading has failed")},o.onload=function(){t.push(r),n.push(o.result),s==e.length-1&&a.setState({files:t,prevs:n,imgNames:new Array(e.length).fill(""),imgDescs:new Array(e.length).fill(""),tags:new Array(e.length).fill(new Array)})},o.readAsDataURL(r)})}},{key:"onFormSubmit",value:function(){var e=Object(F.a)(U.a.mark(function e(a){var t,n,r,s,o,i,c,l,u;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),t=this.state,n=t.files,r=t.imgNames,s=t.imgDescs,o=t.tags,this.props.startLoading(),i=localStorage.getItem("access"),c=!0,l=0;case 6:if(!(l<n.length)){e.next=22;break}return(u=new FormData).append("image_name",r[l]),u.append("image_desc",s[l]),u.append("image_file",n[l]),u.append("api_type","insert"),sa()(o[l],function(e,a){u.append("tags",o[l][a])}),e.next=15,this.props.upsertImage(u,i);case 15:if(this.props.lastRespMsg===ke){e.next=19;break}return this.handleSnackBar(ye[this.props.lastRespMsg],"error"),c=!1,e.abrupt("break",22);case 19:l++,e.next=6;break;case 22:this.props.stopLoading(),c&&(this.handleSnackBar("Upload images successfully.","success"),this.setState({files:[],imgNames:null,imgDescs:null}));case 24:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}()},{key:"onDropdownChange",value:function(e,a){console.log(">>> onDropdownChange, data.name: ".concat(a.name,", data.value: ").concat(a.value));var t=this.state.tags,n=a.name.split("-");t[parseInt(n[1])]=a.value,this.setState({tags:t})}},{key:"onInputChange",value:function(e){var a=e.target.value,t=e.target.name;console.log(">>> onInputChange.eName, eVal : ",t,a);var n=this.state,r=n.imgNames,s=n.imgDescs,o=t.split("-");"imgName"==o[0]?(r[parseInt(o[1])]=a,this.setState({imgNames:r})):"imgDesc"==o[0]&&(s[parseInt(o[1])]=a,this.setState({imgDescs:s}))}},{key:"componentDidMount",value:function(){var e=Object(F.a)(U.a.mark(function e(){var a,t;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("access"),t=localStorage.getItem("refresh"),e.next=4,this.props.verifyJWTToken(a,t);case 4:if(this.props.isLogin){e.next=7;break}return e.next=7,this.props.userLogout();case 7:this.state.modifiedTags=Ga()(this.props.tags,function(e,a){return{key:e,text:e,value:a+1}});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.props.classes,t=this.state,n=t.files,r=t.modifiedTags;return s.a.createElement("div",{className:"div-uploadPage-wrapper"},s.a.createElement("form",{className:"form-upload",onSubmit:this.onFormSubmit,encType:"multipart/form-data"},s.a.createElement(fa.a,{className:a.uploadCard},s.a.createElement(Ca.a,{className:a.cardActionArea},s.a.createElement(Da.a,{onDrop:this.onDrop},function(e){var t=e.getRootProps,n=e.getInputProps;return s.a.createElement("section",null,s.a.createElement("div",t(),s.a.createElement("input",n()),s.a.createElement("span",{className:"span-drapdropText"},s.a.createElement(te.a,{className:a.AddPhotoIcon}),"Drag and drop some files here, or click to select files to upload.")))}))),s.a.createElement(fa.a,{className:a.pendingUpload},s.a.createElement(xa.a,{horizontal:!0},s.a.createElement(Ra.a,{as:"h4"},s.a.createElement(Pa.a,{name:"images outline"}),"Upload Images")),0==n.length&&s.a.createElement("div",{className:"div-placeholder"}),n.length>0&&Ga()(n,function(a,t){return s.a.createElement("div",{key:a.name+t,className:"div-uploadField"},s.a.createElement("div",{className:""},s.a.createElement(Aa.a,{icon:"list",iconPosition:"left",placeholder:"Image name",className:"Input-imgName",name:"imgName-"+t,value:e.state.imgNames[parseInt(t)],onChange:e.onInputChange}),s.a.createElement(Aa.a,{icon:"newspaper outline",iconPosition:"left",placeholder:"Image description",className:"Input-imgDesc",name:"imgDesc-"+t,value:e.state.imgDescs[parseInt(t)],onChange:e.onInputChange}),s.a.createElement(ja.a,{className:"Dropdown-tags",placeholder:"Tags",name:"tags-"+t,onChange:e.onDropdownChange,renderLabel:function(e){return{color:"blue",icon:"tag",content:e.text}},multiple:!0,search:!0,selection:!0,options:r})),s.a.createElement("div",null,s.a.createElement("img",{src:e.state.prevs[t],className:"img-preview"})))}),n.length>0&&s.a.createElement(wa.a,{type:"submit",className:"Button-submit"}," Submit "))))}}]),a}(s.a.Component)),Xa=Object(m.c)(function(e){return{lastRespMsg:e.apiReducer.lastRespMsg,tags:e.apiReducer.tags,isLogin:e.userReducer.isLogin}},function(e){return Object(f.b)({upsertImage:Fa,verifyJWTToken:Se,startLoading:qe,stopLoading:Je,userLogout:Re},e)})(Object(De.a)(function(e){return{uploadCard:{textAlign:"center",width:"40%",height:"100%"},pendingUpload:{width:"55%",marginLeft:"10px"},AddPhotoIcon:{margin:"auto",display:"block"}}})(Object(ca.withSnackbar)(Za))),Qa=(t(945),t(1017)),$a=t(1022),et=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(p.a)(a).call(this,e))).state={currPage:1,imgPerPage:"12",selectedTags:[],isContentLoading:!1},t.onPageChange=t.onPageChange.bind(Object(T.a)(t)),t.onPerPageChange=t.onPerPageChange.bind(Object(T.a)(t)),t.onDropdownChange=t.onDropdownChange.bind(Object(T.a)(t)),t.onClickLabel=t.onClickLabel.bind(Object(T.a)(t)),t.handleContentLoading=t.handleContentLoading.bind(Object(T.a)(t)),t.onClickClearTags=t.onClickClearTags.bind(Object(T.a)(t)),t}return Object(d.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(F.a)(U.a.mark(function e(){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return qe(),this.props.userId,e.next=4,this.props.getImages(-1,1,12,[]);case 4:if(this.props.tags){e.next=7;break}return e.next=7,this.props.getTags();case 7:Je();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onPageChange",value:function(){var e=Object(F.a)(U.a.mark(function e(a,t){var n,r,s,o;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(">>> HomePage.onPageChange.props:",t,this.props),n=this.props,n.userId,n.lastRespMsg,r=this.state,s=r.imgPerPage,o=r.selectedTags,this.handleContentLoading("start"),e.next=6,this.props.getImages(-1,t.activePage,s,o);case 6:this.handleContentLoading("stop");case 7:case"end":return e.stop()}},e,this)}));return function(a,t){return e.apply(this,arguments)}}()},{key:"onDropdownChange",value:function(){var e=Object(F.a)(U.a.mark(function e(a,t){var n;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(">>> onDropdownChange.dropdownObj.value: ",t.value),this.setState({selectedTags:t.value}),n=this.props.currPage,this.handleContentLoading("start"),e.next=6,this.props.getImages(-1,n,this.state.imgPerPage,t.value);case 6:this.handleContentLoading("stop");case 7:case"end":return e.stop()}},e,this)}));return function(a,t){return e.apply(this,arguments)}}()},{key:"onPerPageChange",value:function(){var e=Object(F.a)(U.a.mark(function e(a,t){var n;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(">>> onPerPageChange:",t),this.setState({currPage:1,imgPerPage:t.value}),n=this.state.currPage,this.handleContentLoading("start"),e.next=6,this.props.getImages(-1,n,t.value,this.state.selectedTags);case 6:this.handleContentLoading("stop");case 7:case"end":return e.stop()}},e,this)}));return function(a,t){return e.apply(this,arguments)}}()},{key:"onClickLabel",value:function(){var e=Object(F.a)(U.a.mark(function e(a){var t,n,r,s;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.selectedTags,n=t.slice(0,a).concat(t.slice(a+1,t.length)),this.setState({currPage:1,selectedTags:n}),r=this.state,r.currPage,s=r.imgPerPage,this.handleContentLoading("start"),e.next=7,this.props.getImages(-1,1,s,n);case 7:this.handleContentLoading("stop");case 8:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}()},{key:"onClickClearTags",value:function(){var e=Object(F.a)(U.a.mark(function e(){var a;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state.imgPerPage,this.setState({currPage:1,selectedTags:[]}),this.handleContentLoading("start"),e.next=5,this.props.getImages(-1,1,a,[]);case 5:this.handleContentLoading("stop");case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleContentLoading",value:function(e){var a=this;"start"===e?this.setState({isContentLoading:!0}):setTimeout(function(){a.setState({isContentLoading:!1})},300)}},{key:"render",value:function(){var e=this,a=this.props,t=(a.classes,a.isLoading,a.userId,a.lastRespMsg,a.data),n=(a.imgCount,a.numPages),r=a.tags,o=this.state,i=o.imgPerPage,c=(o.currPage,o.selectedTags),l=o.isContentLoading,u=["red","orange","yellow","olive","green","teal","blue","violet","purple","pink","brown","grey","black"],p=Ga()(r,function(e,a){return{key:e,text:e,value:a+1}});return s.a.createElement("div",{className:"div-homePage-wrapper"},s.a.createElement("div",{className:"div-pageWidgets-wrapper"},s.a.createElement(Na.a,{defaultActivePage:1,ellipsisItem:{content:s.a.createElement(Pa.a,{name:"ellipsis horizontal"}),icon:!0},firstItem:{content:s.a.createElement(Pa.a,{name:"angle double left"}),icon:!0},lastItem:{content:s.a.createElement(Pa.a,{name:"angle double right"}),icon:!0},prevItem:{content:s.a.createElement(Pa.a,{name:"angle left"}),icon:!0},nextItem:{content:s.a.createElement(Pa.a,{name:"angle right"}),icon:!0},onPageChange:this.onPageChange,totalPages:n}),s.a.createElement("div",{className:"div-choosePageSelect"},s.a.createElement("span",{className:"span-imgPerPage"},"Images per page:"),s.a.createElement(Qa.a,{onChange:this.onPerPageChange,value:i,options:[{key:"12",value:"12",text:"12 images per page"},{key:"24",value:"24",text:"24 images per page"}]}))),s.a.createElement("div",{className:"div-tagsGrid-wrapper"},s.a.createElement($a.a,{className:"Card-tags",color:"blue"},s.a.createElement(xa.a,{horizontal:!0},s.a.createElement(Ra.a,{className:"Header-title",as:"h4"},s.a.createElement(Pa.a,{name:"tags"}),"Availale Tags")),s.a.createElement(ja.a,{placeholder:"Tags",className:"Dropdown-tags",value:c,multiple:!0,minCharacters:2,search:!0,selection:!0,options:p,renderLabel:function(){return null},onChange:this.onDropdownChange}),s.a.createElement(wa.a,{className:"Button-clearSelectedTags",content:"Clear selected tags",onClick:this.onClickClearTags}),s.a.createElement(xa.a,{horizontal:!0},s.a.createElement(Ra.a,{className:"Header-title",as:"h4"},s.a.createElement(Pa.a,{name:"check"}),s.a.createElement(Pa.a,{name:"tags"}),"Selected Tags")),s.a.createElement("div",{className:"div-selectedTags-wrapper"},Ga()(c,function(a,t){return s.a.createElement(Sa.a,{onClick:function(){return e.onClickLabel(t)},className:"Label-tags",key:"Label-"+t},r[c[t]-1])}),0==c.length&&s.a.createElement(Sa.a,{className:"Label-tags"},"No tags selected"))),s.a.createElement($a.a,{className:"Card-imgs",color:"blue"},s.a.createElement(La.a,{padded:!0,columns:4,className:"Grid-img-wrapper"},l?s.a.createElement("div",{className:"div-contentLoader"},s.a.createElement(Ea.a,{type:"line-scale-pulse-out-rapid",color:"#000000",active:!0})):t&&0==t.length||!t?s.a.createElement("div",{className:"div-noImage-placeholder"},s.a.createElement("span",{className:"span-noImages"},s.a.createElement(Pa.a,{name:"images"})," No Images")):Ga()(t,function(e,a){return s.a.createElement(La.a.Column,{key:"GridCol-"+a},s.a.createElement($a.a,{className:"Card-img",color:u[a%12]},s.a.createElement(Oa.a,{src:fe+e.image_file})))})))))}}]),a}(s.a.Component),at=Object(m.c)(function(e){return{isLoading:e.uiReducer.isLoading,userId:e.userReducer.userId,lastRespMsg:e.apiReducer.lastRespMsg,data:e.apiReducer.data,imgCount:e.apiReducer.imgCount,numPages:e.apiReducer.numPages,currPage:e.apiReducer.currPage,tags:e.apiReducer.tags}},function(e){return Object(f.b)({startLoading:qe,stopLoading:Je,getImages:Ta,getTags:Ma},e)})(Object(De.a)(function(e){return{gridList:{},subheader:{height:"auto"}}})(et)),tt=function(e){var a=e.component,t=Object(He.a)(e,["component"]);return s.a.createElement(_e.b,Object.assign({},t,{render:function(e){return t.isLogin?s.a.createElement(a,e):s.a.createElement(_e.a,{to:{pathname:be,state:{from:e.location}}})}}))},nt=function(e){var a=e.component,t=Object(He.a)(e,["component"]);return s.a.createElement(_e.b,Object.assign({},t,{render:function(e){return t.isLogin?s.a.createElement(_e.a,{to:{pathname:Ce,state:{from:e.location}}}):s.a.createElement(a,e)}}))},rt=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(p.a)(a).call(this,e))).state={},t}return Object(d.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(F.a)(U.a.mark(function e(){var a,t;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.startLoading(),a=localStorage.getItem("access"),t=localStorage.getItem("refresh"),e.next=5,this.props.verifyJWTToken(a,t);case 5:if(!this.props.isLogin){e.next=8;break}return e.next=8,this.props.getAuthUser(a);case 8:this.props.stopLoading();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.isLogin;return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement(_e.b,{path:ve,exact:!0,component:at}),s.a.createElement(nt,{isLogin:e,path:be,component:ua}),s.a.createElement(nt,{isLogin:e,path:Ee,component:ha}),s.a.createElement(tt,{isLogin:e,path:Ie,exact:!0,component:Xa}),s.a.createElement(tt,{isLogin:e,path:Ce,component:Ka})))}}]),a}(r.Component),st=Object(m.c)(function(e){return{isLogin:e.userReducer.isLogin}},function(e){return Object(f.b)({verifyJWTToken:Se,getAuthUser:Pe,startLoading:qe,stopLoading:Je},e)})(rt),ot=(t(946),t(487)),it=Object(ot.a)(function(e){return s.a.createElement("div",{className:"div-loaderDisplay-wrapper"},s.a.createElement("div",{className:"div-loaderDisplay-cover"}),s.a.createElement("div",{className:"div-loader-wrapper"},s.a.createElement(Ea.a,{type:"line-scale-pulse-out-rapid",color:"#000000",active:!0})))}),ct=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(p.a)(a).call(this,e))).state={isDrawerOpen:!1},t.handleDrawerAction=t.handleDrawerAction.bind(Object(T.a)(t)),t}return Object(d.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(F.a)(U.a.mark(function e(){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.startLoading(),e.next=3,this.props.getTags();case 3:this.props.stopLoading();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleDrawerAction",value:function(){this.setState({isDrawerOpen:!this.state.isDrawerOpen})}},{key:"render",value:function(){var e=this.state.isDrawerOpen,a=this.props.isLoading;return s.a.createElement("div",{className:"div-layout-wrapper"},s.a.createElement(Ve,{isDrawerOpen:e,handleDrawerAction:this.handleDrawerAction}),s.a.createElement("div",{className:a?"full-opacity":"full-transparents"},s.a.createElement(it,null)),s.a.createElement("div",{className:"div-layoutContent-wrapper "+(e?"div-collapsed":"")},s.a.createElement(st,null)),s.a.createElement(We,null))}}]),a}(s.a.Component),lt=Object(m.c)(function(e){return{isLogin:e.userReducer.isLogin,isLoading:e.uiReducer.isLoading}},function(e){return Object(f.b)({startLoading:qe,stopLoading:Je,getTags:Ma},e)})(ct),ut=function(e){function a(){return Object(c.a)(this,a),Object(u.a)(this,Object(p.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){Object(h.loadReCaptcha)()}},{key:"render",value:function(){return s.a.createElement(m.a,{store:D},s.a.createElement("div",{className:"App"},s.a.createElement(g.a,{history:j},s.a.createElement(ca.SnackbarProvider,{maxSnack:5,dense:!0,preventDuplicate:!0,autoHideDuration:2e3,anchorOrigin:{vertical:"bottom",horizontal:"right"}},s.a.createElement(lt,null)))))}}]),a}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(ut,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[514,1,2]]]);
//# sourceMappingURL=main.b08ce49a.chunk.js.map